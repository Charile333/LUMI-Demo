# ğŸ¦¢ é»‘å¤©é¹…å®æ—¶é¢„è­¦ç³»ç»Ÿ - å®Œæ•´æŒ‡å—

## ğŸ“Š ç³»ç»Ÿæ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æœ¬åœ°å¼€å‘ç¯å¢ƒ                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  npm run dev                                                     â”‚
â”‚    â†“                                                             â”‚
â”‚  è‡ªå®šä¹‰æœåŠ¡å™¨ (server-with-websocket.js)                        â”‚
â”‚    â”œâ”€ Next.js åº”ç”¨                                              â”‚
â”‚    â”œâ”€ WebSocket æœåŠ¡ (/ws/alerts)                               â”‚
â”‚    â””â”€ å¸‚åœºç›‘æ§ (Binance WebSocket)                              â”‚
â”‚         â†“                                                        â”‚
â”‚  æœ¬åœ°æ•°æ®åº“ (SQLite)                                             â”‚
â”‚    â†“                                                             â”‚
â”‚  WebSocket å®æ—¶æ¨é€ â†’ å‰ç«¯æ˜¾ç¤º                                   â”‚
â”‚                                                                  â”‚
â”‚  âœ… æ¯«ç§’çº§å»¶è¿Ÿ                                                   â”‚
â”‚  âœ… å®Œæ•´åŠŸèƒ½                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Vercel ç”Ÿäº§ç¯å¢ƒ                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Vercel Serverless Functions                                    â”‚
â”‚    â”œâ”€ Next.js é¡µé¢                                              â”‚
â”‚    â”œâ”€ API Routes                                                â”‚
â”‚    â””â”€ âŒ ä¸æ”¯æŒï¼šè‡ªå®šä¹‰æœåŠ¡å™¨ã€WebSocketã€é•¿æœŸè¿›ç¨‹              â”‚
â”‚                                                                  â”‚
â”‚  GitHub Actions (Cron: æ¯5åˆ†é’Ÿ)                                â”‚
â”‚    â”œâ”€ ç›‘æ§ Binance API                                          â”‚
â”‚    â”œâ”€ æ£€æµ‹ä»·æ ¼å¼‚å¸¸ (>1%)                                        â”‚
â”‚    â””â”€ å†™å…¥ Supabase æ•°æ®åº“                                      â”‚
â”‚         â†“                                                        â”‚
â”‚  Supabase äº‘æ•°æ®åº“ (PostgreSQL)                                 â”‚
â”‚    â”œâ”€ alerts è¡¨                                                 â”‚
â”‚    â””â”€ æŒä¹…åŒ–å­˜å‚¨                                                 â”‚
â”‚         â†“                                                        â”‚
â”‚  å‰ç«¯è½®è¯¢ (æ¯10ç§’)                                               â”‚
â”‚    â””â”€ /api/alerts/latest                                        â”‚
â”‚         â†“                                                        â”‚
â”‚  æ˜¾ç¤ºå®æ—¶è­¦æŠ¥                                                    â”‚
â”‚                                                                  â”‚
â”‚  âš ï¸ 10ç§’å»¶è¿Ÿï¼ˆè½®è¯¢é—´éš”ï¼‰+ 5åˆ†é’Ÿå»¶è¿Ÿï¼ˆç›‘æ§é—´éš”ï¼‰                 â”‚
â”‚  âœ… å®Œå…¨å…è´¹                                                     â”‚
â”‚  âœ… å…¨çƒéƒ¨ç½²                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘
```bash
cd LUMI
npm install
npm run dev
```
è®¿é—®ï¼šhttp://localhost:3000/black-swan

### Vercel éƒ¨ç½²
**5åˆ†é’Ÿå¿«é€Ÿè®¾ç½®**ï¼šå‚è€ƒ `QUICKSTART_REALTIME.md`

**å®Œæ•´éƒ¨ç½²æŒ‡å—**ï¼šå‚è€ƒ `DEPLOY_WITH_GITHUB_ACTIONS.md`

## ğŸ“š æ–‡æ¡£ç´¢å¼•

| æ–‡æ¡£ | ç”¨é€” | é€‚åˆäººç¾¤ |
|------|------|----------|
| `QUICKSTART_REALTIME.md` | 5åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨ | æ‰€æœ‰äºº |
| `DEPLOY_WITH_GITHUB_ACTIONS.md` | å®Œæ•´éƒ¨ç½²æŒ‡å— | æŠ€æœ¯äººå‘˜ |
| `SUPABASE_SETUP.md` | Supabase è¯¦ç»†è®¾ç½® | éœ€è¦æ•°æ®åº“é…ç½® |
| `VERCEL_DEPLOYMENT_GUIDE.md` | Vercel å¹³å°è¯´æ˜ | äº†è§£é™åˆ¶ |
| `VERCEL_REALTIME_ALERTS.md` | å®æ—¶é¢„è­¦æœºåˆ¶ | äº†è§£åŸç† |
| `MARKET_MONITOR_GUIDE.md` | æœ¬åœ°ç›‘æ§è¯´æ˜ | æœ¬åœ°å¼€å‘ |

## ğŸ”‘ å…³é”®æ–‡ä»¶

### GitHub Actions
- `.github/workflows/market-monitor.yml` - å®šæ—¶ä»»åŠ¡é…ç½®
- `.github/scripts/monitor-market.js` - ç›‘æ§è„šæœ¬

### API ç«¯ç‚¹
- `app/api/alerts/latest/route.ts` - è·å–æœ€æ–°è­¦æŠ¥
- `app/api/alerts/route.ts` - è·å–æ‰€æœ‰è­¦æŠ¥
- `app/api/alerts/stats/route.ts` - ç»Ÿè®¡ä¿¡æ¯
- `app/api/alerts/real-crash-events/route.ts` - å†å²äº‹ä»¶

### æ ¸å¿ƒç»„ä»¶
- `app/black-swan/page.tsx` - ä¸»é¡µé¢
- `lib/supabase-client.ts` - Supabase å®¢æˆ·ç«¯
- `lib/market-monitor.js` - æœ¬åœ°å¸‚åœºç›‘æ§
- `server-with-websocket.js` - è‡ªå®šä¹‰æœåŠ¡å™¨

### è„šæœ¬å·¥å…·
- `scripts/import-historical-crashes.js` - å¯¼å…¥åˆ°æœ¬åœ° SQLite
- `scripts/import-historical-to-supabase.js` - å¯¼å…¥åˆ° Supabase

## ğŸŒ ç¯å¢ƒå˜é‡

### æœ¬åœ°å¼€å‘
ä¸éœ€è¦é¢å¤–é…ç½®ï¼Œä½¿ç”¨æœ¬åœ° SQLiteã€‚

### Vercel ç”Ÿäº§
åœ¨ Vercel Dashboard é…ç½®ï¼š
```env
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbG...
```

### GitHub Actions
åœ¨ GitHub Secrets é…ç½®ï¼š
```env
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_KEY=eyJhbG...
```

## ğŸ“Š æ•°æ®æµå¯¹æ¯”

| ç¯èŠ‚ | æœ¬åœ°å¼€å‘ | Vercel ç”Ÿäº§ |
|------|----------|-------------|
| æ•°æ®æº | Binance WebSocket | GitHub Actions |
| ç›‘æ§é¢‘ç‡ | å®æ—¶ | æ¯5åˆ†é’Ÿ |
| æ•°æ®åº“ | SQLite | Supabase |
| æ¨é€æ–¹å¼ | WebSocket | HTTP è½®è¯¢ |
| å‰ç«¯åˆ·æ–° | å®æ—¶ | æ¯10ç§’ |
| æ€»å»¶è¿Ÿ | <1ç§’ | 5-15åˆ†é’Ÿ |
| æˆæœ¬ | å…è´¹ | å…è´¹ |

## ğŸ”§ åŠŸèƒ½çŠ¶æ€

### âœ… å®Œå…¨æ”¯æŒï¼ˆæ‰€æœ‰ç¯å¢ƒï¼‰
- å†å²é—ªå´©äº‹ä»¶åˆ—è¡¨ï¼ˆ21ä¸ªï¼‰
- TradingView å®æ—¶å›¾è¡¨
- æ•°æ®åˆ†æé¢æ¿
- å“åº”å¼è®¾è®¡
- é»‘å¤©é¹…äº‹ä»¶è¯¦æƒ…

### âœ… æœ¬åœ°å¼€å‘æ”¯æŒ
- è‡ªåŠ¨å¸‚åœºç›‘æ§
- WebSocket å®æ—¶æ¨é€
- æ¯«ç§’çº§å»¶è¿Ÿ

### âš ï¸ Vercel éƒ¨åˆ†æ”¯æŒ
- å®æ—¶è­¦æŠ¥ï¼ˆ10ç§’è½®è¯¢å»¶è¿Ÿï¼‰
- å¸‚åœºç›‘æ§ï¼ˆGitHub Actionsï¼Œ5åˆ†é’Ÿå»¶è¿Ÿï¼‰

## ğŸ’° æˆæœ¬åˆ†æ

### å®Œå…¨å…è´¹æ–¹æ¡ˆ
| æœåŠ¡ | å…è´¹é¢åº¦ | å®é™…ç”¨é‡ | æˆæœ¬ |
|------|----------|----------|------|
| Vercel | Hobby è®¡åˆ’ | 1ä¸ªé¡¹ç›® | $0 |
| Supabase | 500MB æ•°æ®åº“ | <1MB | $0 |
| GitHub Actions | 2000åˆ†é’Ÿ/æœˆ | <100åˆ†é’Ÿ | $0 |
| Binance API | 1200æ¬¡/åˆ†é’Ÿ | 12æ¬¡/å°æ—¶ | $0 |

**æ€»è®¡ï¼š$0/æœˆ** âœ…

## ğŸš€ æ€§èƒ½æŒ‡æ ‡

### æœ¬åœ°å¼€å‘
- è­¦æŠ¥ç”Ÿæˆï¼š<100ms
- WebSocket å»¶è¿Ÿï¼š<50ms
- é¡µé¢åŠ è½½ï¼š<2s
- å®æ—¶æ€§ï¼šâ­â­â­â­â­

### Vercel ç”Ÿäº§
- API å“åº”ï¼š<200ms
- è½®è¯¢é—´éš”ï¼š10s
- ç›‘æ§é—´éš”ï¼š5min
- å®æ—¶æ€§ï¼šâ­â­â­ï¼ˆå¤Ÿç”¨ï¼‰

## ğŸ“ å­¦ä¹ è·¯å¾„

### æ–°æ‰‹ä¸Šæ‰‹
1. é˜…è¯» `QUICKSTART_REALTIME.md`
2. åˆ›å»º Supabase é¡¹ç›®
3. é…ç½® GitHub Actions
4. éƒ¨ç½²åˆ° Vercel

### æ·±å…¥ç†è§£
1. é˜…è¯» `DEPLOY_WITH_GITHUB_ACTIONS.md`
2. ç ”ç©¶ç›‘æ§è„šæœ¬
3. è‡ªå®šä¹‰ç›‘æ§å‚æ•°
4. æ·»åŠ æ›´å¤šå¸ç§

### é«˜çº§å®šåˆ¶
1. ä¿®æ”¹ `.github/scripts/monitor-market.js`
2. è°ƒæ•´é˜ˆå€¼å’Œé¢‘ç‡
3. æ·»åŠ è‡ªå®šä¹‰é€šçŸ¥
4. é›†æˆå…¶ä»–æ•°æ®æº

## ğŸ› å¸¸è§é—®é¢˜

### Q: Vercel ä¸Šçœ‹ä¸åˆ°å®æ—¶æ•°æ®ï¼Ÿ
A: æ£€æŸ¥ï¼š
1. Supabase æ•°æ®åº“æ˜¯å¦æœ‰æ•°æ®
2. Vercel ç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®
3. GitHub Actions æ˜¯å¦è¿è¡ŒæˆåŠŸ

### Q: GitHub Actions ä¸è¿è¡Œï¼Ÿ
A: æ£€æŸ¥ï¼š
1. Actions æ˜¯å¦å¯ç”¨
2. Secrets æ˜¯å¦é…ç½®
3. Cron è¯­æ³•æ˜¯å¦æ­£ç¡®

### Q: æƒ³è¦æ›´å®æ—¶çš„æ•°æ®ï¼Ÿ
A: å¯ä»¥ï¼š
1. è°ƒæ•´ GitHub Actions ä¸ºæ¯åˆ†é’Ÿè¿è¡Œ
2. è°ƒæ•´å‰ç«¯è½®è¯¢ä¸ºæ¯ç§’
3. æˆ–ä½¿ç”¨ Railway.app ç­‰å¹³å°éƒ¨ç½²å®Œæ•´æœåŠ¡

## ğŸ‰ æ€»ç»“

è¿™ä¸ªç³»ç»Ÿæä¾›äº†ä¸¤ç§æ¨¡å¼ï¼š

**æœ¬åœ°å¼€å‘**ï¼šå®Œæ•´çš„å®æ—¶ç›‘æ§ä½“éªŒ
**Vercel ç”Ÿäº§**ï¼šå…è´¹çš„å‡†å®æ—¶ç›‘æ§ï¼ˆ5-15åˆ†é’Ÿå»¶è¿Ÿï¼‰

å¯¹äºå¤§å¤šæ•°å±•ç¤ºå’Œå­¦ä¹ ç”¨é€”ï¼ŒVercel æ–¹æ¡ˆå·²ç»è¶³å¤Ÿå¥½äº†ï¼

å¦‚æœéœ€è¦ç”Ÿäº§çº§çš„å®æ—¶æ€§ï¼Œå»ºè®®ä½¿ç”¨ Railway æˆ–å…¶ä»–æ”¯æŒ WebSocket çš„å¹³å°ã€‚

