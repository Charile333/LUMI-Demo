# äº‹ä»¶åˆ—è¡¨æ•°æ®ä¿®å¤

## âœ… å·²ä¿®å¤çš„é—®é¢˜

### 1. **crashPercentage ç™¾åˆ†æ¯”è®¡ç®—é”™è¯¯**

#### é—®é¢˜
```json
{
  "asset": "BTC/USDT",
  "crashPercentage": "-2522.0"  // âŒ é”™è¯¯ï¼šæ˜¾ç¤º-2522%
}
{
  "asset": "ETH/USDT", 
  "crashPercentage": "-4500.0"  // âŒ é”™è¯¯ï¼šæ˜¾ç¤º-4500%
}
```

#### åŸå› 
- æ•°æ®åº“ä¸­æœ‰ä¸¤ç§æ ¼å¼ï¼š
  - **å°æ•°æ ¼å¼**: `price_change: -0.2522` (è¡¨ç¤º-25.22%)
  - **ç™¾åˆ†æ¯”æ ¼å¼**: `price_change: -25.22` (å·²ç»æ˜¯ç™¾åˆ†æ¯”)
- æ—§ä»£ç ç»Ÿä¸€ä¹˜ä»¥100ï¼Œå¯¼è‡´ç™¾åˆ†æ¯”æ ¼å¼çš„æ•°æ®è¢«é‡å¤è®¡ç®—

#### è§£å†³æ–¹æ¡ˆ
```javascript
// æ™ºèƒ½åˆ¤æ–­æ•°æ®æ ¼å¼
let percentageValue = priceChange;
if (Math.abs(priceChange) < 1) {
  // å°æ•°å½¢å¼ï¼ˆå¦‚-0.2522ï¼‰ï¼Œè½¬æ¢ä¸ºç™¾åˆ†æ¯”
  percentageValue = priceChange * 100;
}
// å¦åˆ™å·²ç»æ˜¯ç™¾åˆ†æ¯”ï¼ˆå¦‚-25.22ï¼‰ï¼Œç›´æ¥ä½¿ç”¨
```

#### ä¿®å¤å
```json
{
  "asset": "BTC/USDT",
  "crashPercentage": "-25.2"  // âœ… æ­£ç¡®
}
{
  "asset": "ETH/USDT",
  "crashPercentage": "-45.0"  // âœ… æ­£ç¡®
}
```

### 2. **duration æŒç»­æ—¶é—´æ ¼å¼ä¼˜åŒ–**

#### é—®é¢˜
```json
{
  "duration": "1å°æ—¶"  // åœ¨æŸäº›ç¯å¢ƒæ˜¾ç¤ºä¸ºä¹±ç 
}
```

#### è§£å†³æ–¹æ¡ˆ
```javascript
// ä½¿ç”¨è‹±æ–‡ç¼©å†™é¿å…ç¼–ç é—®é¢˜
const duration = `${durationHours}h`;  // "1h", "3h", "8h"
```

#### ä¿®å¤å
```json
{
  "duration": "1h"   // âœ… ç®€æ´ä¸”æ— ç¼–ç é—®é¢˜
}
```

### 3. **æŒç»­æ—¶é—´ä¸Šé™è°ƒæ•´**

#### ä¹‹å‰
```javascript
const duration = Math.max(1, Math.min(sameDayEvents.length * 0.5, 6));
// æœ€å¤§6å°æ—¶
```

#### ç°åœ¨
```javascript
const duration = Math.max(1, Math.min(sameDayEvents.length * 0.5, 8));
// æœ€å¤§8å°æ—¶ï¼Œæ›´ç¬¦åˆå®é™…é—ªå´©æŒç»­æ—¶é—´
```

## ğŸ“Š ä¿®å¤å‰åå¯¹æ¯”

### 2025-10-10 BTCé—ªå´©

| å­—æ®µ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| crashPercentage | "-2522.0" | "-25.2" |
| duration | "1?ï¿½ï¿½????" | "1h" |
| æ˜¾ç¤ºæ•ˆæœ | BTC/USDT -2522% | BTC/USDT -25.2% |

### 2025-10-10 ETHé—ªå´©

| å­—æ®µ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| crashPercentage | "-4500.0" | "-45.0" |
| duration | "1?ï¿½ï¿½????" | "1h" |
| æ˜¾ç¤ºæ•ˆæœ | ETH/USDT -4500% | ETH/USDT -45.0% |

### å†å²äº‹ä»¶ï¼ˆå·²æ­£ç¡®ï¼‰

| æ—¥æœŸ | èµ„äº§ | ç™¾åˆ†æ¯” | çŠ¶æ€ |
|------|------|--------|------|
| 2024-08-05 | BTC/USDT | -15.8% | âœ… æ­£å¸¸ |
| 2024-07-04 | ETH/USDT | -12.3% | âœ… æ­£å¸¸ |
| 2023-11-10 | BTC/USDT | -8.5% | âœ… æ­£å¸¸ |
| 2022-11-09 | BTC/USDT | -23.5% | âœ… æ­£å¸¸ |

## ğŸ” æ•°æ®æ ¼å¼è¯´æ˜

### details.price_change çš„ä¸¤ç§æ ¼å¼

#### æ ¼å¼1ï¼šå°æ•°å½¢å¼ï¼ˆæ—§å†å²æ•°æ®ï¼‰
```json
{
  "details": {
    "price_change": -0.158,  // è¡¨ç¤º-15.8%
    "current_price": 52200,
    "previous_price": 62000
  }
}
```
**å¤„ç†**ï¼šä¹˜ä»¥100è½¬æ¢ä¸ºç™¾åˆ†æ¯”

#### æ ¼å¼2ï¼šç™¾åˆ†æ¯”å½¢å¼ï¼ˆæ–°äº‹ä»¶æ•°æ®ï¼‰
```json
{
  "details": {
    "price_change": -25.22,  // ç›´æ¥è¡¨ç¤º-25.22%
    "peak_price": 115000,
    "bottom_price": 86000
  }
}
```
**å¤„ç†**ï¼šç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦è½¬æ¢

## ğŸ’¡ ä¸ºä»€ä¹ˆä¼šæœ‰ä¸¤ç§æ ¼å¼ï¼Ÿ

1. **å†å²æ•°æ®**ï¼ˆ2018-2024ï¼‰ï¼šä» `import-historical-crashes.js` å¯¼å…¥ï¼Œä½¿ç”¨å°æ•°æ ¼å¼
2. **æœ€æ–°äº‹ä»¶**ï¼ˆ2025-10-10/11ï¼‰ï¼šä» `add-oct-real-crash.js` æ·»åŠ ï¼Œä½¿ç”¨ç™¾åˆ†æ¯”æ ¼å¼

## ğŸš€ æµ‹è¯•éªŒè¯

### APIæµ‹è¯•
```bash
curl http://localhost:3000/api/alerts/crash-events
```

### é¢„æœŸç»“æœ
```json
{
  "success": true,
  "data": [
    {
      "id": "BTCUSDT_2025-10-11_1",
      "date": "2025-10-11",
      "asset": "BTC/USDT",
      "crashPercentage": "0.0",     // âœ… æ¸…ç®—äº‹ä»¶ï¼Œæ— ä»·æ ¼å˜åŒ–
      "duration": "1h",
      "description": "é—ªå´©æœŸé—´è§¦å‘å¤§è§„æ¨¡æ æ†æ¸…ç®—..."
    },
    {
      "id": "BTCUSDT_2025-10-10_1",
      "date": "2025-10-10",
      "asset": "BTC/USDT",
      "crashPercentage": "-25.2",   // âœ… æ­£ç¡®æ˜¾ç¤º-25.2%
      "duration": "1h",
      "description": "BTCä»·æ ¼åœ¨æ•°å°æ—¶å†…æš´è·Œ25%..."
    },
    {
      "id": "ETHUSDT_2025-10-10_1",
      "date": "2025-10-10",
      "asset": "ETH/USDT",
      "crashPercentage": "-45.0",   // âœ… æ­£ç¡®æ˜¾ç¤º-45%
      "duration": "1h",
      "description": "ETHè·ŸéšBTCæš´è·Œ..."
    }
  ]
}
```

## ğŸ“ åç»­ä¼˜åŒ–å»ºè®®

### 1. ç»Ÿä¸€æ•°æ®æ ¼å¼
åœ¨æ•°æ®å¯¼å…¥æ—¶ç»Ÿä¸€ä½¿ç”¨ä¸€ç§æ ¼å¼ï¼ˆå»ºè®®ç™¾åˆ†æ¯”æ ¼å¼ï¼‰

### 2. æ•°æ®éªŒè¯
æ·»åŠ æ•°æ®èŒƒå›´éªŒè¯ï¼š
```javascript
if (Math.abs(percentageValue) > 100) {
  console.warn('Invalid percentage value:', percentageValue);
}
```

### 3. å›½é™…åŒ–æ”¯æŒ
ä½¿ç”¨é…ç½®æ–‡ä»¶ç®¡ç†ä¸åŒè¯­è¨€çš„æ—¶é—´å•ä½ï¼š
```javascript
const durationText = {
  'zh-CN': 'å°æ—¶',
  'en-US': 'h',
  'ja-JP': 'æ™‚é–“'
};
```

---

**âœ… ä¿®å¤å®Œæˆï¼** æœåŠ¡å™¨å·²é‡å¯ï¼Œåˆ·æ–°é¡µé¢å³å¯çœ‹åˆ°æ­£ç¡®çš„æ•°æ®ï¼

**æµ‹è¯•åœ°å€**ï¼šhttp://localhost:3000/black-swan









