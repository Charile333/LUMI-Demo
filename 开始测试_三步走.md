# 🚀 开始测试 - 三步走

---

## 第 1 步：清理数据库（1分钟）

在 **Supabase SQL Editor** 执行：

```sql
-- 清空测试数据
TRUNCATE TABLE orderbooks CASCADE;
TRUNCATE TABLE market_states CASCADE;
TRUNCATE TABLE orders CASCADE;
```

✅ 完成

---

## 第 2 步：访问产品（马上）

开发服务器已启动，直接访问：

```
http://localhost:3000
```

✅ 完成

---

## 第 3 步：测试Realtime（2分钟）

### 3.1 打开任意市场详情

例如：`http://localhost:3000/market/1`

### 3.2 检查连接状态

右上角应该显示：🟢 **实时**

### 3.3 在Supabase中更新数据

```sql
-- 为市场1创建订单簿
INSERT INTO orderbooks (market_id, bids, asks, last_price, volume_24h)
VALUES (
  1,
  '[{"price": 0.70, "quantity": 300}]'::jsonb,
  '[{"price": 0.71, "quantity": 280}]'::jsonb,
  0.705,
  8000
)
ON CONFLICT (market_id) DO UPDATE SET
  bids = EXCLUDED.bids,
  asks = EXCLUDED.asks,
  last_price = EXCLUDED.last_price,
  updated_at = NOW();
```

### 3.4 观察页面实时更新

**应该在 < 1秒 内看到：**
- 💰 概率：70.5%
- 📊 图表：自动重绘，终点移到70.5%
- 🟢 状态：实时

✅ 如果看到更新 = **Realtime工作完美！**

---

## 🎯 更多测试

### 测试手动刷新按钮

1. 点击右上角"刷新"按钮
2. 观察图标旋转
3. 数据更新
4. **页面不刷新**！

---

### 测试价格变化

```sql
-- 价格上涨
UPDATE orderbooks
SET last_price = 0.85
WHERE market_id = 1;

-- 等2秒...

-- 价格下跌
UPDATE orderbooks
SET last_price = 0.45
WHERE market_id = 1;
```

观察图表实时跟随变化！

---

## 🎉 完成

所有核心功能都可以测试了！

**详细测试清单**：查看 `快速开始测试.md`

**技术细节**：查看 `LUMI_生产环境_最终总结.md`

---

**开始测试吧！** 🚀

