# 🖥️ 黑天鹅终端 - 快速启动指南

## ✅ 使用真实预警数据

### 前提条件
- ✅ 预警系统 (duolume-master/main.py) 正在运行
- ✅ 数据库文件存在: duolume-master/utils/database/app.db

---

## 🚀 启动步骤

### 1. 确保预警服务运行

```bash
# 如果还没启动预警服务，先启动它：
cd duolume-master
python main.py
```

你应该看到类似输出：
```
✅ 连接到 Binance WebSocket
🔍 监控中: BTC/USDT, ETH/USDT...
```

### 2. 启动 LUMI 服务器

**打开新的终端窗口**：

```bash
cd LUMI
npm run dev
```

服务器启动后会显示：
```
✅ LUMI 服务器启动成功！
📍 应用地址: http://localhost:3000
🦢 预警监控已启动
```

### 3. 打开终端界面

在浏览器访问：

```
http://localhost:3000/black-swan-terminal
```

---

## 🎯 工作原理

```
┌─────────────────────┐
│  Binance WebSocket  │  实时市场数据
└──────────┬──────────┘
           ↓
┌─────────────────────┐
│  main.py (运行中)    │  检测异常
└──────────┬──────────┘
           ↓
┌─────────────────────┐
│  SQLite 数据库       │  存储警报
└──────────┬──────────┘
           ↓
┌─────────────────────┐
│  server.js (监控)    │  读取 + 推送
└──────────┬──────────┘
           ↓
┌─────────────────────┐
│  终端界面 (显示)     │  实时展示
└─────────────────────┘
```

---

## 📊 界面说明

### 顶部状态栏
- **WS: CONNECTED** - WebSocket连接状态
- **UPTIME** - 运行时间
- **ALERTS** - 总警报数
- **CRITICAL** - 严重警报数

### 左侧：警报流
实时滚动显示警报：
```
[2025-01-15 10:23:45] CRITICAL  BTC/USDT  -5.23%
Sudden price drop detected
```

### 右侧：系统面板
- **系统状态** - WebSocket、监控状态
- **统计数据** - 各级别警报统计
- **检测模块** - 显示活跃的检测器
- **快捷命令** - 常用命令快捷按钮

### 底部：命令行
```bash
root@blackswan:~$ help
```

---

## 💻 常用命令

| 命令 | 功能 |
|------|------|
| `help` | 显示所有命令 |
| `stats` | 查看统计信息 |
| `status` | 系统状态 |
| `filter critical` | 只显示严重警报 |
| `filter all` | 显示所有警报 |
| `clear` | 清空屏幕 |

---

## 📈 警报级别

| 级别 | 颜色 | 变化 | 说明 |
|------|------|------|------|
| CRITICAL | 🔴 红 | >5% | 严重异常 |
| HIGH | 🟠 橙 | 2-5% | 高级警报 |
| MEDIUM | 🟡 黄 | 1-2% | 中级警报 |
| LOW | 🟢 绿 | <1% | 低级警报 |

---

## 🔍 验证系统运行

### 1. 检查预警服务
```bash
cd duolume-master
python check_btc_eth_alerts.py
```

应该显示最近的警报记录。

### 2. 检查 WebSocket 连接
打开终端界面，顶部应该显示：
```
● WS: CONNECTED
```

### 3. 测试命令
在终端输入：
```bash
root@blackswan:~$ stats
```

应该显示当前统计信息。

---

## 🐛 故障排查

### 问题1：显示 "WS: DISCONNECTED"

**原因**：LUMI服务器未运行

**解决**：
```bash
cd LUMI
npm run dev
```

### 问题2：显示 "[ NO DATA ]"

**原因**：数据库中没有警报

**解决**：
```bash
# 检查预警服务是否运行
cd duolume-master
python check_btc_eth_alerts.py

# 如果没有数据，启动预警服务
python main.py
```

### 问题3：预警服务无法连接 Binance

**原因**：网络限制

**解决**：预警服务会自动切换到演示模式，仍会生成模拟警报

---

## 💡 使用技巧

### 1. 关注严重事件
```bash
root@blackswan:~$ filter critical
```

### 2. 查看整体情况
```bash
root@blackswan:~$ stats
```

### 3. 清理屏幕
```bash
root@blackswan:~$ clear
```

### 4. 使用快捷按钮
右侧面板有快捷按钮，点击即可执行命令，无需输入。

---

## 🎮 实战演练

### 第一次使用

```bash
# 1. 启动预警服务（终端1）
cd duolume-master
python main.py

# 2. 启动LUMI（终端2）
cd LUMI
npm run dev

# 3. 打开浏览器
# http://localhost:3000/black-swan-terminal

# 4. 在终端输入
root@blackswan:~$ help
root@blackswan:~$ stats
root@blackswan:~$ filter critical
```

---

## 📚 更多文档

- **完整功能文档**: [BLACK_SWAN_TERMINAL_README.md](./BLACK_SWAN_TERMINAL_README.md)
- **预警系统集成**: [BLACK_SWAN_INTEGRATION_GUIDE.md](./BLACK_SWAN_INTEGRATION_GUIDE.md)

---

## 🎉 开始监控

```bash
# 一切就绪！
# 1. 预警服务运行 ✅
# 2. LUMI服务器运行 ✅
# 3. 终端界面打开 ✅
# 4. 实时监控市场 ✅
```

**访问**: http://localhost:3000/black-swan-terminal

```
root@blackswan:~$ █
```

---

**🦢 开始实时监控黑天鹅事件！**




