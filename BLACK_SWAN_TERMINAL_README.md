# 🖥️ 黑天鹅终端监控系统

## 终端样式实时监控界面

一个酷炫的终端风格黑天鹅事件监控界面，提供命令行操作体验和实时数据流展示。

---

## 🚀 快速启动

### 1. 启动服务器

```bash
cd LUMI
npm run dev
```

### 2. 访问终端界面

在浏览器中打开：

```
http://localhost:3000/black-swan-terminal
```

或者从黑天鹅预警页面点击 **[TERMINAL MODE]** 按钮切换。

---

## 🎨 界面特点

### 终端样式设计
- ✅ 黑色背景 + 绿色文本（经典黑客终端风格）
- ✅ ASCII 艺术横幅
- ✅ 等宽字体（monospace）
- ✅ 命令行界面
- ✅ 实时滚动日志流
- ✅ 彩色严重程度标识

### 功能区域

```
┌─────────────────────────────────────────────────────────┐
│  顶部状态栏：连接状态、运行时间、警报统计               │
├─────────────────────────────────────────────────────────┤
│  ASCII 横幅：黑天鹅系统标志                              │
├───────────────────────────────┬─────────────────────────┤
│  警报流（左侧）                │  系统面板（右侧）        │
│  - 实时警报消息                │  - 系统状态              │
│  - 时间戳                      │  - 统计数据              │
│  - 严重程度                    │  - 检测模块              │
│  - 资产代码                    │  - 快捷命令              │
│  - 价格变化                    │  - 严重程度图例          │
│  - 详细信息                    │                          │
├───────────────────────────────┴─────────────────────────┤
│  命令行输入：root@blackswan:~$                          │
└─────────────────────────────────────────────────────────┘
```

---

## 💻 可用命令

在底部命令行输入框中输入以下命令：

### 基础命令

| 命令 | 说明 |
|------|------|
| `help` | 显示所有可用命令 |
| `clear` | 清除所有警报记录 |
| `stats` | 显示详细统计信息 |
| `status` | 显示系统状态 |
| `exit` | 退出终端（提示信息） |

### 过滤命令

| 命令 | 说明 |
|------|------|
| `filter all` | 显示所有警报 |
| `filter critical` | 仅显示严重警报 (>5%) |
| `filter high` | 仅显示高级警报 (2-5%) |
| `filter medium` | 仅显示中级警报 (1-2%) |

### 使用示例

```bash
root@blackswan:~$ help
root@blackswan:~$ filter critical
root@blackswan:~$ stats
root@blackswan:~$ clear
```

---

## 📊 警报等级

### 严重程度分类

| 级别 | 颜色 | 价格变化 | 说明 |
|------|------|----------|------|
| **CRITICAL** | 🔴 红色 | > 5% | 严重市场异常 |
| **HIGH** | 🟠 橙色 | 2-5% | 高级警报 |
| **MEDIUM** | 🟡 黄色 | 1-2% | 中级警报 |
| **LOW** | 🟢 绿色 | < 1% | 低级警报 |

---

## 🎯 实时功能

### WebSocket 连接
- 自动连接到预警系统
- 实时接收新警报
- 断线自动重连（5秒）
- 连接状态实时显示

### 数据展示
- 实时警报流（最多显示 100 条）
- 自动滚动到最新消息
- 时间戳格式化显示
- 资产代码识别
- 价格变化百分比

### 系统监控
- 运行时间计数器
- 总警报数统计
- 严重警报数统计
- 监控资产数量
- CPU/内存使用率（模拟）

---

## 🔧 高级功能

### 快捷按钮
右侧面板提供常用命令的快捷按钮：
- 点击即可执行对应命令
- 无需手动输入

### 键盘快捷键
- `Enter` - 执行命令
- 点击输入框自动聚焦

### 自动功能
- 启动时自动加载历史数据
- 自动计算统计信息
- 自动更新运行时间
- 自动识别警报严重程度

---

## 📡 数据源

### WebSocket 端点
```
ws://localhost:3000/ws/alerts
```

### REST API
```
GET http://localhost:3000/api/alerts - 获取历史警报
```

---

## 🎨 样式自定义

### 颜色方案

```
背景色：黑色 (#000000)
主文本：绿色 (#4ade80)
系统消息：青色 (#22d3ee)
严重警报：红色 (#ef4444)
高级警报：橙色 (#f97316)
中级警报：黄色 (#eab308)
低级警报：绿色 (#22c55e)
```

### 字体
```
font-family: monospace
使用等宽字体实现终端效果
```

---

## 🔍 检测模块

系统集成以下检测器：

### 1. Price Jump Detector
- **文件**: `price_jump.py`
- **功能**: 检测异常价格波动
- **阈值**: 可配置

### 2. Whale Transfer Detector
- **文件**: `whale_transfer.py`
- **功能**: 检测大额资金转移
- **阈值**: $100,000+

### 3. Funding Spike Detector
- **文件**: `funding_spike.py`
- **功能**: 检测资金费率异常
- **阈值**: 可配置

---

## 🐛 故障排查

### WebSocket 连接失败

**症状**: 顶部状态栏显示 "WS: DISCONNECTED"

**解决方法**:
1. 确认服务器正在运行 (`npm run dev`)
2. 检查端口 3000 是否被占用
3. 查看浏览器控制台错误信息
4. 等待自动重连（5秒）

### 没有警报数据

**症状**: 显示 "[ NO DATA ]"

**解决方法**:
1. 确认数据库文件存在：
   ```bash
   ls ../duolume-master/utils/database/app.db
   ```
2. 运行警报生成程序：
   ```bash
   cd ../duolume-master
   python main.py
   ```
3. 或触发测试警报：
   ```bash
   python test_alert_trigger.py
   ```

### 命令无响应

**症状**: 输入命令后无反应

**解决方法**:
1. 确保按下 Enter 键
2. 检查命令拼写是否正确
3. 输入 `help` 查看可用命令
4. 刷新页面重新加载

---

## 🚀 性能优化

### 数据限制
- 警报历史：最多保留 100 条
- 自动裁剪旧数据
- 防止内存溢出

### 滚动优化
- 使用虚拟滚动
- 自定义滚动条样式
- 流畅的滚动体验

---

## 📈 未来改进

### 计划功能
- [ ] 导出警报数据（CSV/JSON）
- [ ] 自定义警报规则
- [ ] 声音/桌面通知
- [ ] 多标签页支持
- [ ] 警报搜索功能
- [ ] 图表可视化
- [ ] 主题切换（绿色/琥珀色/蓝色）
- [ ] 命令自动补全
- [ ] 命令历史记录（上/下箭头）

---

## 💡 使用技巧

### 1. 快速过滤
使用快捷按钮快速切换过滤模式，无需手动输入命令。

### 2. 监控关键警报
设置 `filter critical` 仅关注最重要的警报。

### 3. 定期清理
使用 `clear` 命令清除历史记录，保持界面整洁。

### 4. 查看统计
定期使用 `stats` 命令了解系统整体状况。

---

## 🎓 终端命令速查表

```bash
# 显示帮助
help

# 查看统计
stats

# 查看状态
status

# 过滤严重警报
filter critical

# 显示所有警报
filter all

# 清除屏幕
clear
```

---

## 📞 支持

### 相关文档
- [黑天鹅集成指南](./BLACK_SWAN_INTEGRATION_GUIDE.md)
- [项目 README](./README.md)

### 数据库路径
```
../duolume-master/utils/database/app.db
```

### 相关脚本
```bash
# 检查警报
python ../duolume-master/check_btc_eth_alerts.py

# 生成测试数据
python ../duolume-master/test_alert_trigger.py

# 启动监控程序
python ../duolume-master/main.py
```

---

## 🎉 特色亮点

### 1. 沉浸式体验
完全的终端风格界面，提供专业的监控体验。

### 2. 实时性
WebSocket 实时推送，无延迟接收警报。

### 3. 命令行操作
通过命令行控制，更高效、更专业。

### 4. 可视化层次
清晰的颜色分级，快速识别警报重要性。

### 5. 系统监控
全面的系统状态展示，了解运行情况。

---

**🎮 现在就开始使用终端监控系统吧！**

```bash
$ cd LUMI
$ npm run dev
$ open http://localhost:3000/black-swan-terminal
```

**Happy Monitoring! 🦢**








