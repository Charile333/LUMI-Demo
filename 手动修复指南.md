# 🔧 手动修复路由冲突

## 问题

服务器一直报错：
```
Error: You cannot use different slug names for the same dynamic path ('id' !== 'marketId').
```

## 解决方案

请在 PowerShell 终端中手动运行以下命令：

### 步骤 1: 运行清理脚本

```powershell
cd E:\project\market
.\clean-routes.ps1
```

这个脚本会：
1. 停止所有 node 进程
2. 删除 `.next` 缓存
3. 查找并删除所有 `[id]` 目录
4. 验证清理完成

### 步骤 2: 启动服务器

```powershell
npm run dev
```

### 步骤 3: 等待启动

等待看到：
```
✓ Compiled successfully
- Local: http://localhost:3000
✓ Ready
```

### 步骤 4: 访问管理后台

```
http://localhost:3000/admin/create-market
```

---

## 如果脚本运行失败

手动执行以下命令：

```powershell
# 1. 停止所有 node
Get-Process -Name node | Stop-Process -Force

# 2. 删除缓存
Remove-Item -Path .next -Recurse -Force

# 3. 查找 [id] 目录
Get-ChildItem -Path app -Recurse -Directory | Where-Object { $_.Name -eq '[id]' }

# 4. 如果找到了，手动删除每个目录
# 例如:
Remove-Item -Path "app\api\admin\markets\[id]" -Recurse -Force
Remove-Item -Path "app\api\markets\[id]" -Recurse -Force

# 5. 启动
npm run dev
```

---

## 验证没有冲突

启动前检查：

```powershell
# 列出所有动态路由
Get-ChildItem -Path app -Recurse -Directory | Where-Object { $_.Name -match '^\[' } | Select-Object FullName
```

应该只看到 `[marketId]` 和 `[eventId]`，不应该有 `[id]`。

---

**完成后服务器应该能正常启动！** ✅


