# ğŸ¯ å¦‚ä½•ä½¿ç”¨ä¸‰å¤§å®˜æ–¹ç»„ä»¶

> è®©æ‚¨çš„é¢„æµ‹å¸‚åœºäº§å“ä½¿ç”¨ UMAã€Polymarketã€Gnosis çš„å®˜æ–¹ç»„ä»¶

---

## ğŸ“Š ä¸‰å¤§å®˜æ–¹ç»„ä»¶

### 1ï¸âƒ£ UMA å®˜æ–¹é¢„è¨€æœº âœ…
- **åŠŸèƒ½**: å»ä¸­å¿ƒåŒ–ç»“ç®—
- **åœ°å€**: `0x263351499f82C107e540B01F0Ca959843e22464a`
- **æ¥æº**: https://github.com/UMAprotocol/protocol

### 2ï¸âƒ£ Polymarket å®˜æ–¹ CTF Exchange âœ…
- **åŠŸèƒ½**: è®¢å•ç°¿äº¤æ˜“
- **åœ°å€**: `0xdFE02Eb6733538f8Ea35D585af8DE5958AD99E40`
- **æ¥æº**: https://github.com/Polymarket/ctf-exchange

### 3ï¸âƒ£ Gnosis Conditional Tokens âœ…
- **åŠŸèƒ½**: æ¡ä»¶ä»£å¸ç³»ç»Ÿ
- **åœ°å€**: `0xb171BBc6b1476ee1b6aD4Ac2cA7ed4AfFdFa10a2`
- **æ¥æº**: https://github.com/gnosis/conditional-tokens-contracts

---

## ğŸš€ å·²ç»é…ç½®å®Œæˆï¼

**å¥½æ¶ˆæ¯**ï¼šæ‚¨çš„ç³»ç»Ÿ**å·²ç»åœ¨ä½¿ç”¨**è¿™ä¸‰ä¸ªå®˜æ–¹ç»„ä»¶äº†ï¼âœ…

### å½“å‰é…ç½®

```typescript
// lib/blockchainService.ts
const CONTRACTS = {
  realAdapter: '0xaBf0e29946C63fa1920E00bEA95dDADeF70FD80C',  // è¿æ¥ä¸‰è€…
  umaOracle: '0x263351499f82C107e540B01F0Ca959843e22464a',     // âœ… ç»„ä»¶1
  conditionalTokens: '0xb171BBc6b1476ee1b6aD4Ac2cA7ed4AfFdFa10a2', // âœ… ç»„ä»¶3
  exchange: '0xdFE02Eb6733538f8Ea35D585af8DE5958AD99E40',       // âœ… ç»„ä»¶2
  // ...
};
```

**è¿™äº›é…ç½®å·²è‡ªåŠ¨åº”ç”¨åˆ°**ï¼š
- âœ… `lib/blockchainService.ts`
- âœ… `lib/providers/blockchain.ts`
- âœ… `lib/market-activation/blockchain-activator.ts`

---

## ğŸ¯ å¦‚ä½•åœ¨äº§å“ä¸­ä½¿ç”¨

### åœºæ™¯ 1: ç”¨æˆ·æµè§ˆå¸‚åœº

**æµç¨‹**ï¼š
```
ç”¨æˆ·è®¿é—® /grid-market
  â†“
å‰ç«¯è°ƒç”¨ lib/blockchainService.ts
  â†“
ä» RealUmaCTFAdapter è¯»å–å¸‚åœºæ•°æ®
  â†“
æ˜¾ç¤ºå¸‚åœºåˆ—è¡¨ï¼ˆæ•°æ®æ¥è‡ª Conditional Tokensï¼‰
```

**ä»£ç **ï¼š
```typescript
// è¿™å·²ç»åœ¨æ‚¨çš„ä»£ç ä¸­å·¥ä½œäº†ï¼
const blockchainService = new BlockchainService();
const markets = await blockchainService.getMarkets();
// markets æ•°æ®æ¥è‡ª Gnosis Conditional Tokens âœ…
```

---

### åœºæ™¯ 2: ç”¨æˆ·ä¸‹å•äº¤æ˜“

**æµç¨‹**ï¼š
```
ç”¨æˆ·ç‚¹å‡»"ä¹°å…¥"æˆ–"å–å‡º"
  â†“
åˆ›å»ºè®¢å•ï¼ˆç­¾åï¼‰
  â†“
æäº¤åˆ° Polymarket å®˜æ–¹ CTF Exchange âœ…
  â†“
é“¾ä¸Šç»“ç®—ï¼ˆä½¿ç”¨ Conditional Tokensï¼‰âœ…
  â†“
ç”¨æˆ·è·å¾— Outcome Tokens
```

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
// åœ¨æ‚¨çš„äº¤æ˜“ç»„ä»¶ä¸­
import { ethers } from 'ethers';

const CTF_EXCHANGE = '0xdFE02Eb6733538f8Ea35D585af8DE5958AD99E40'; // Polymarket å®˜æ–¹

const exchange = new ethers.Contract(CTF_EXCHANGE, EXCHANGE_ABI, signer);

// å¡«å……è®¢å•ï¼ˆä½¿ç”¨å®˜æ–¹äº¤æ˜“æ‰€ï¼‰
await exchange.fillOrder(order, signature, fillAmount);
```

**è¿™ä¸ªäº¤æ˜“ä¼š**ï¼š
- âœ… åœ¨ Polymarket å®˜æ–¹ CTF Exchange ä¸Šæ‰§è¡Œ
- âœ… ä½¿ç”¨ Gnosis Conditional Tokens è½¬ç§»ä»£å¸
- âœ… å®Œå…¨å»ä¸­å¿ƒåŒ–ï¼Œæ— éœ€ä¸­å¿ƒåŒ–æœåŠ¡å™¨

---

### åœºæ™¯ 3: å¸‚åœºç»“ç®—

**æµç¨‹**ï¼š
```
å¸‚åœºåˆ°æœŸ
  â†“
ç®¡ç†å‘˜/ææ¡ˆè€…è¯·æ±‚ç»“ç®—
  â†“
è°ƒç”¨ UMA å®˜æ–¹é¢„è¨€æœº âœ…
  â†“
æŒ‘æˆ˜æœŸï¼ˆ2å°æ—¶ï¼‰
  â†“
UMA æŠ•ç¥¨ï¼ˆå¦‚æœ‰äº‰è®®ï¼‰âœ…
  â†“
è·å¾—æœ€ç»ˆç»“æœ
  â†“
Conditional Tokens ç»“ç®— âœ…
```

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
// 1. è¯·æ±‚ UMA é¢„è¨€æœº
const adapter = new ethers.Contract(ADAPTER_ADDRESS, ADAPTER_ABI, signer);
await adapter.requestOraclePrice(questionId);
// è¿™ä¼šè°ƒç”¨ UMA å®˜æ–¹é¢„è¨€æœº âœ…

// 2. ç­‰å¾…æŒ‘æˆ˜æœŸï¼ˆ2å°æ—¶ï¼‰...

// 3. ç»“ç®—å¸‚åœº
await adapter.resolve(questionId);
// è¿™ä¼šä» UMA è·å–ç»“æœå¹¶é€šè¿‡ Conditional Tokens ç»“ç®— âœ…
```

---

## ğŸ’¡ å®é™…åº”ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: åˆ›å»ºå¸‚åœºé¡µé¢

**æ–‡ä»¶**: `app/_dev_only_admin/create-market/page.tsx`

```typescript
'use client';
import { useState } from 'react';
import { ethers } from 'ethers';

// ä½¿ç”¨ä¸‰å¤§å®˜æ–¹ç»„ä»¶çš„é…ç½®
const ADAPTER_ADDRESS = '0xaBf0e29946C63fa1920E00bEA95dDADeF70FD80C';

export default function CreateMarketPage() {
  const [title, setTitle] = useState('');
  const [description, setDescription] = useState('');
  
  const handleCreate = async () => {
    // è¿æ¥é’±åŒ…
    const provider = new ethers.providers.Web3Provider(window.ethereum);
    const signer = provider.getSigner();
    
    // è¿æ¥é€‚é…å™¨
    const adapter = new ethers.Contract(ADAPTER_ADDRESS, ADAPTER_ABI, signer);
    
    // åˆ›å»ºå¸‚åœº
    const questionId = ethers.utils.id(title + Date.now());
    
    const tx = await adapter.initialize(
      questionId,
      title,
      description,
      2,  // YES/NO
      '0x8d2dae90Dbc51dF7E18C1b857544AC979F87a77a',  // Mock USDC
      ethers.utils.parseUnits('100', 6),  // 100 USDC
      0   // ä½¿ç”¨é»˜è®¤æŒ‘æˆ˜æœŸï¼ˆ2å°æ—¶ï¼‰
    );
    
    await tx.wait();
    
    console.log('âœ… å¸‚åœºå·²åˆ›å»ºï¼ä½¿ç”¨äº†ï¼š');
    console.log('   - Gnosis Conditional Tokens (ç»„ä»¶3)');
    console.log('   - å‡†å¤‡ä½¿ç”¨ UMA é¢„è¨€æœºç»“ç®— (ç»„ä»¶1)');
    
    return questionId;
  };
  
  return (
    <div>
      <h1>åˆ›å»ºå¸‚åœº</h1>
      <input value={title} onChange={(e) => setTitle(e.target.value)} />
      <textarea value={description} onChange={(e) => setDescription(e.target.value)} />
      <button onClick={handleCreate}>åˆ›å»ºå¸‚åœºï¼ˆä½¿ç”¨å®˜æ–¹ç»„ä»¶ï¼‰</button>
    </div>
  );
}
```

**è¿™ä¸ªé¡µé¢ä½¿ç”¨äº†**ï¼š
- âœ… é€šè¿‡é€‚é…å™¨ä½¿ç”¨ **Gnosis Conditional Tokens**
- âœ… é…ç½®ä½¿ç”¨ **UMA å®˜æ–¹é¢„è¨€æœº**

---

### ç¤ºä¾‹ 2: äº¤æ˜“é¡µé¢

**æ–‡ä»¶**: `app/trade/[marketId]/page.tsx`

```typescript
'use client';
import { useWallet } from '@/hooks/useWallet';

const CTF_EXCHANGE = '0xdFE02Eb6733538f8Ea35D585af8DE5958AD99E40'; // Polymarket å®˜æ–¹

export default function TradePage() {
  const { signer } = useWallet();
  
  const handleBuy = async (tokenId: number, amount: number) => {
    // è¿æ¥ Polymarket å®˜æ–¹ CTF Exchange
    const exchange = new ethers.Contract(CTF_EXCHANGE, EXCHANGE_ABI, signer);
    
    // åˆ›å»ºè®¢å•
    const order = {
      salt: Date.now(),
      maker: await signer.getAddress(),
      tokenId: tokenId,
      makerAmount: ethers.utils.parseUnits(amount.toString(), 6),
      // ... å…¶ä»–å‚æ•°
    };
    
    // ç­¾åè®¢å•ï¼ˆEIP-712ï¼‰
    const signature = await signOrder(order, signer);
    
    // æäº¤åˆ° Polymarket å®˜æ–¹äº¤æ˜“æ‰€
    const tx = await exchange.fillOrder(order, signature, order.makerAmount);
    await tx.wait();
    
    console.log('âœ… äº¤æ˜“æˆåŠŸï¼ä½¿ç”¨äº†ï¼š');
    console.log('   - Polymarket å®˜æ–¹ CTF Exchange (ç»„ä»¶2)');
    console.log('   - Gnosis Conditional Tokens (ç»„ä»¶3)');
  };
  
  return (
    <div>
      <h1>äº¤æ˜“å¸‚åœº</h1>
      <button onClick={() => handleBuy(1, 100)}>ä¹°å…¥ YES</button>
      <button onClick={() => handleBuy(2, 100)}>ä¹°å…¥ NO</button>
    </div>
  );
}
```

**è¿™ä¸ªé¡µé¢ä½¿ç”¨äº†**ï¼š
- âœ… **Polymarket å®˜æ–¹ CTF Exchange** è¿›è¡Œäº¤æ˜“
- âœ… **Gnosis Conditional Tokens** ç®¡ç†ä»£å¸

---

### ç¤ºä¾‹ 3: å¸‚åœºç»“ç®—é¡µé¢

```typescript
'use client';
import { UMAOracleClient } from '@/lib/uma/oracle-client';

const UMA_ORACLE = '0x263351499f82C107e540B01F0Ca959843e22464a'; // UMA å®˜æ–¹

export default function SettlementPage({ questionId }: { questionId: string }) {
  const [status, setStatus] = useState('pending');
  
  const handleSettle = async () => {
    // 1. è¯·æ±‚ UMA é¢„è¨€æœº
    const adapter = new ethers.Contract(ADAPTER_ADDRESS, ADAPTER_ABI, signer);
    
    await adapter.requestOraclePrice(questionId);
    setStatus('waiting_challenge'); // ç­‰å¾…æŒ‘æˆ˜æœŸ
    
    console.log('âœ… å·²è¯·æ±‚ UMA å®˜æ–¹é¢„è¨€æœº (ç»„ä»¶1)');
    
    // 2. ç›‘å¬ UMA äº‹ä»¶
    const umaClient = new UMAOracleClient(provider, UMA_ORACLE);
    
    umaClient.onPriceProposed((requester, proposer, price) => {
      console.log('æœ‰äººææ¡ˆäº†:', price.toString());
      setStatus('proposed');
    });
    
    umaClient.onPriceSettled((requester, price) => {
      console.log('UMA é¢„è¨€æœºå·²ç»“ç®—:', price.toString());
      setStatus('settled');
      
      // 3. åœ¨ Conditional Tokens ä¸­ç»“ç®—
      adapter.resolve(questionId);
    });
  };
  
  return (
    <div>
      <h1>å¸‚åœºç»“ç®—</h1>
      <p>çŠ¶æ€: {status}</p>
      <button onClick={handleSettle}>è¯·æ±‚ UMA ç»“ç®—</button>
    </div>
  );
}
```

**è¿™ä¸ªé¡µé¢ä½¿ç”¨äº†**ï¼š
- âœ… **UMA å®˜æ–¹é¢„è¨€æœº** è·å–ç»“æœ
- âœ… **Gnosis Conditional Tokens** ç»“ç®—å¸‚åœº

---

## ğŸ”„ å®Œæ•´çš„ç”¨æˆ·æµç¨‹

### æµç¨‹ 1: åˆ›å»ºå’Œäº¤æ˜“

```
1. ç®¡ç†å‘˜åˆ›å»ºå¸‚åœº
   â†’ ä½¿ç”¨ RealUmaCTFAdapter
   â†’ åœ¨ Gnosis Conditional Tokens ä¸­æ³¨å†Œ âœ…
   
2. ç”¨æˆ·æµè§ˆå¸‚åœº
   â†’ ä» Conditional Tokens è¯»å–æ•°æ® âœ…
   
3. ç”¨æˆ·ä¸‹å•
   â†’ è®¢å•å­˜å‚¨åœ¨ Supabase
   â†’ é“¾ä¸‹åŒ¹é…
   
4. è®¢å•åŒ¹é…æˆåŠŸ
   â†’ åœ¨ Polymarket å®˜æ–¹ CTF Exchange ç»“ç®— âœ…
   â†’ ä»£å¸è½¬ç§»é€šè¿‡ Conditional Tokens âœ…
```

### æµç¨‹ 2: å¸‚åœºç»“ç®—

```
1. å¸‚åœºåˆ°æœŸ
   
2. è¯·æ±‚ UMA é¢„è¨€æœº
   â†’ adapter.requestOraclePrice(questionId)
   â†’ è°ƒç”¨ UMA å®˜æ–¹é¢„è¨€æœº âœ…
   
3. ææ¡ˆè€…æäº¤ç»“æœ
   â†’ ç›´æ¥ä¸ UMA Oracle äº¤äº’ âœ…
   â†’ è´¨æŠ¼ä¿è¯é‡‘
   
4. æŒ‘æˆ˜æœŸï¼ˆ2å°æ—¶ï¼‰
   â†’ UMA é¢„è¨€æœºç®¡ç† âœ…
   â†’ ä»»ä½•äººå¯ä»¥äº‰è®®
   
5. è·å–æœ€ç»ˆç»“æœ
   â†’ ä» UMA Oracle è·å– âœ…
   â†’ é€šè¿‡ Conditional Tokens ç»“ç®— âœ…
   
6. ç”¨æˆ·èµå›
   â†’ åœ¨ Conditional Tokens ä¸­èµå› âœ…
```

---

## ğŸ’» åœ¨æ‚¨ç°æœ‰ä»£ç ä¸­çš„åº”ç”¨

### 1. å¸‚åœºåˆ›å»ºï¼ˆå·²æœ‰åŠŸèƒ½ï¼‰

**æ–‡ä»¶**: `lib/market-activation/blockchain-activator.ts`

**å·²ç»ä½¿ç”¨**ï¼š
```typescript
const CONTRACTS = {
  adapter: '0xaBf0e29946C63fa1920E00bEA95dDADeF70FD80C',
  umaOracle: '0x263351499f82C107e540B01F0Ca959843e22464a',    // âœ… UMA å®˜æ–¹
  conditionalTokens: '0xb171BBc6b1476ee1b6aD4Ac2cA7ed4AfFdFa10a2', // âœ… Gnosis
  exchange: '0xdFE02Eb6733538f8Ea35D585af8DE5958AD99E40',       // âœ… Polymarket
};

// å½“æ‚¨è°ƒç”¨ activateMarketOnChain() æ—¶
// å°±æ˜¯åœ¨ä½¿ç”¨ Gnosis Conditional Tokens âœ…
```

### 2. å¸‚åœºæ•°æ®è¯»å–ï¼ˆå·²æœ‰åŠŸèƒ½ï¼‰

**æ–‡ä»¶**: `lib/blockchainService.ts`

**å·²ç»ä½¿ç”¨**ï¼š
```typescript
export class BlockchainService {
  async getMarkets(limit: number = 50) {
    // ä»é€‚é…å™¨è¯»å–
    const marketIds = await this.adapter.getMarketList(0, limit);
    
    // è¿™äº›æ•°æ®å­˜å‚¨åœ¨ Gnosis Conditional Tokens ä¸­ âœ…
    const markets = await Promise.all(
      marketIds.map(id => this.adapter.getMarket(id))
    );
    
    return markets;
  }
}
```

### 3. è®¢å•ç°¿äº¤æ˜“ï¼ˆéœ€è¦é›†æˆï¼‰

**æ–‡ä»¶**: åˆ›å»ºæ–°çš„ `lib/polymarket/exchange-client.ts`

```typescript
import { ethers } from 'ethers';

// Polymarket å®˜æ–¹ CTF Exchange
const CTF_EXCHANGE = '0xdFE02Eb6733538f8Ea35D585af8DE5958AD99E40';

export class ExchangeClient {
  private exchange: ethers.Contract;
  
  constructor(provider: ethers.providers.Provider) {
    this.exchange = new ethers.Contract(
      CTF_EXCHANGE,
      EXCHANGE_ABI,
      provider
    );
  }
  
  /**
   * å¡«å……è®¢å•ï¼ˆä½¿ç”¨ Polymarket å®˜æ–¹äº¤æ˜“æ‰€ï¼‰
   */
  async fillOrder(
    order: Order,
    signature: string,
    fillAmount: ethers.BigNumber,
    signer: ethers.Signer
  ) {
    const exchangeWithSigner = this.exchange.connect(signer);
    
    const tx = await exchangeWithSigner.fillOrder(
      order,
      signature,
      fillAmount
    );
    
    await tx.wait();
    
    console.log('âœ… è®¢å•å·²åœ¨ Polymarket å®˜æ–¹äº¤æ˜“æ‰€æ‰§è¡Œ');
    
    return tx.hash;
  }
}
```

---

## ğŸ¯ ä¸‰å¤§ç»„ä»¶çš„å…·ä½“ä½œç”¨

### ç»„ä»¶ 1: UMA å®˜æ–¹é¢„è¨€æœº

**ä½•æ—¶ä½¿ç”¨**ï¼š
- â“ å¸‚åœºéœ€è¦ç»“ç®—æ—¶
- â“ è·å–çœŸå®ä¸–ç•Œæ•°æ®æ—¶
- â“ éœ€è¦å»ä¸­å¿ƒåŒ–è£å†³æ—¶

**æ‚¨çš„ä»£ç **ï¼š
```typescript
// lib/uma/oracle-client.ts ï¼ˆå·²åˆ›å»ºï¼‰
const umaClient = new UMAOracleClient(provider);

// è¯·æ±‚é¢„è¨€æœº
await umaClient.requestPrice(...);

// ç›‘å¬ç»“æœ
umaClient.onPriceSettled((requester, price) => {
  console.log('UMA é¢„è¨€æœºå·²ç»“ç®—');
});
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… å¸‚åœºåˆ°æœŸåç»“ç®—
- âœ… è·å–æœ€ç»ˆçš„ YES/NO ç»“æœ
- âœ… å¤„ç†äº‰è®®

---

### ç»„ä»¶ 2: Polymarket å®˜æ–¹ CTF Exchange

**ä½•æ—¶ä½¿ç”¨**ï¼š
- ğŸ’± ç”¨æˆ·ä¹°å– Outcome Tokens æ—¶
- ğŸ’± è®¢å•åŒ¹é…æˆåŠŸéœ€è¦é“¾ä¸Šç»“ç®—æ—¶
- ğŸ’± éœ€è¦åŸå­äº¤æ¢æ—¶

**æ‚¨çš„ä»£ç **ï¼š
```typescript
// åœ¨äº¤æ˜“ç»„ä»¶ä¸­
const exchange = new ethers.Contract(
  '0xdFE02Eb6733538f8Ea35D585af8DE5958AD99E40',  // Polymarket å®˜æ–¹
  EXCHANGE_ABI,
  signer
);

await exchange.fillOrder(order, signature, amount);
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… æ‰§è¡Œä¹°å•
- âœ… æ‰§è¡Œå–å•
- âœ… åŸå­äº¤æ¢ï¼ˆä¸€æ¬¡äº¤æ˜“å®Œæˆï¼‰
- âœ… æ‰‹ç»­è´¹æ”¶å–

---

### ç»„ä»¶ 3: Gnosis Conditional Tokens

**ä½•æ—¶ä½¿ç”¨**ï¼š
- ğŸª™ åˆ›å»ºå¸‚åœºæ—¶ï¼ˆé“¸é€ æ¡ä»¶ï¼‰
- ğŸª™ å¸‚åœºç»“ç®—æ—¶ï¼ˆæŠ¥å‘Šç»“æœï¼‰
- ğŸª™ ç”¨æˆ·èµå›æ—¶ï¼ˆå…‘æ¢ä»£å¸ï¼‰

**æ‚¨çš„ä»£ç **ï¼š
```typescript
// é€šè¿‡é€‚é…å™¨è‡ªåŠ¨ä½¿ç”¨
const adapter = new ethers.Contract(ADAPTER_ADDRESS, ABI, signer);

// åˆ›å»ºå¸‚åœºï¼ˆåœ¨ Conditional Tokens ä¸­æ³¨å†Œï¼‰
await adapter.initialize(...);

// ç»“ç®—å¸‚åœºï¼ˆåœ¨ Conditional Tokens ä¸­æŠ¥å‘Šç»“æœï¼‰
await adapter.resolve(questionId);
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… åˆ›å»ºæ¡ä»¶ï¼ˆprepareConditionï¼‰
- âœ… é“¸é€  Outcome Tokens
- âœ… ç»“ç®—å¸‚åœºï¼ˆreportPayoutsï¼‰
- âœ… èµå›ä»£å¸ï¼ˆredeemPositionsï¼‰

---

## ğŸ”„ ä¸‰è€…çš„åä½œæµç¨‹

### å®Œæ•´çš„å¸‚åœºç”Ÿå‘½å‘¨æœŸ

```
ğŸ“ åˆ›å»ºé˜¶æ®µ
â”œâ”€ Adapter è°ƒç”¨
â”œâ”€> Conditional Tokens æ³¨å†Œæ¡ä»¶ âœ… (ç»„ä»¶3)
â””â”€> é…ç½® UMA Oracle ä¸ºè£å†³è€… âœ… (ç»„ä»¶1)

ğŸ’± äº¤æ˜“é˜¶æ®µ  
â”œâ”€ ç”¨æˆ·åˆ›å»ºè®¢å•
â”œâ”€ Supabase å­˜å‚¨è®¢å•
â”œâ”€ è®¢å•åŒ¹é…
â””â”€> CTF Exchange é“¾ä¸Šç»“ç®— âœ… (ç»„ä»¶2)
    â””â”€> Conditional Tokens è½¬ç§»ä»£å¸ âœ… (ç»„ä»¶3)

ğŸ”® ç»“ç®—é˜¶æ®µ
â”œâ”€ å¸‚åœºåˆ°æœŸ
â”œâ”€> è¯·æ±‚ UMA Oracle âœ… (ç»„ä»¶1)
â”œâ”€ ææ¡ˆè€…æäº¤ç»“æœ
â”œâ”€ æŒ‘æˆ˜æœŸï¼ˆ2å°æ—¶ï¼‰
â”œâ”€> UMA æŠ•ç¥¨ï¼ˆå¦‚æœ‰äº‰è®®ï¼‰âœ… (ç»„ä»¶1)
â”œâ”€> è·å–æœ€ç»ˆç»“æœ âœ… (ç»„ä»¶1)
â””â”€> Conditional Tokens ç»“ç®— âœ… (ç»„ä»¶3)

ğŸ’° èµå›é˜¶æ®µ
â””â”€> Conditional Tokens èµå›ä»£å¸ âœ… (ç»„ä»¶3)
```

---

## ğŸ¯ å¦‚ä½•éªŒè¯æ­£åœ¨ä½¿ç”¨å®˜æ–¹ç»„ä»¶

### æ–¹æ³• 1: æŸ¥çœ‹é…ç½®æ–‡ä»¶

```bash
# æŸ¥çœ‹å½“å‰é…ç½®
cat lib/blockchainService.ts | grep "0xdFE02Eb6733538f8Ea35D585af8DE5958AD99E40"
```

å¦‚æœæ‰¾åˆ°è¿™ä¸ªåœ°å€ï¼Œè¯´æ˜æ­£åœ¨ä½¿ç”¨ **Polymarket å®˜æ–¹ CTF Exchange** âœ…

```bash
# æŸ¥çœ‹ UMA Oracle é…ç½®
cat lib/blockchainService.ts | grep "0x263351499f82C107e540B01F0Ca959843e22464a"
```

å¦‚æœæ‰¾åˆ°è¿™ä¸ªåœ°å€ï¼Œè¯´æ˜æ­£åœ¨ä½¿ç”¨ **UMA å®˜æ–¹é¢„è¨€æœº** âœ…

### æ–¹æ³• 2: è¿è¡Œæµ‹è¯•

```bash
npx hardhat run scripts/uma-oracle-test.js --network amoy
```

è¾“å‡ºåº”è¯¥æ˜¾ç¤ºï¼š
```
UMA Oracle: 0x263351499f82C107e540B01F0Ca959843e22464a (å®˜æ–¹) âœ…
```

### æ–¹æ³• 3: æŸ¥çœ‹åŒºå—é“¾æµè§ˆå™¨

åˆ›å»ºå¸‚åœºåï¼ŒæŸ¥çœ‹äº¤æ˜“ï¼š
```
https://amoy.polygonscan.com/tx/YOUR_TX_HASH
```

**æ£€æŸ¥äº¤äº’çš„åˆçº¦**ï¼š
- åº”è¯¥çœ‹åˆ°ä¸ `0xaBf0...D80C` (æ‚¨çš„é€‚é…å™¨) äº¤äº’
- é€‚é…å™¨å†…éƒ¨ä¸ `0xb171...0950` (Conditional Tokens) äº¤äº’ âœ…
- é€‚é…å™¨é…ç½®äº† `0x2633...464a` (UMA Oracle) ä½œä¸ºé¢„è¨€æœº âœ…

---

## âœ… å¿«é€ŸéªŒè¯æ¸…å•

### éªŒè¯æ­£åœ¨ä½¿ç”¨ä¸‰å¤§å®˜æ–¹ç»„ä»¶

- [ ] é…ç½®æ–‡ä»¶åŒ…å«ä¸‰ä¸ªå®˜æ–¹åœ°å€
- [ ] UMA Oracle: `0x2633...464a`
- [ ] CTF Exchange: `0xdFE0...9E40`
- [ ] Conditional Tokens: `0xb171...0950`
- [ ] æµ‹è¯•è„šæœ¬è¿è¡ŒæˆåŠŸ
- [ ] å¯ä»¥åˆ›å»ºå¸‚åœº
- [ ] å¯ä»¥æŸ¥è¯¢å¸‚åœºæ•°æ®

**å¦‚æœä»¥ä¸Šéƒ½é€šè¿‡ï¼Œæ‚¨å°±åœ¨ä½¿ç”¨ä¸‰å¤§å®˜æ–¹ç»„ä»¶ï¼** âœ…

---

## ğŸŠ æ€»ç»“

### æ‚¨çš„äº§å“ç°åœ¨å¦‚ä½•ä½¿ç”¨ä¸‰å¤§ç»„ä»¶

| åŠŸèƒ½ | ä½¿ç”¨çš„ç»„ä»¶ | å®˜æ–¹åœ°å€ |
|------|----------|---------|
| **åˆ›å»ºå¸‚åœº** | Gnosis Conditional Tokens | 0xb171...0950 âœ… |
| **è®¢å•äº¤æ˜“** | Polymarket CTF Exchange | 0xdFE0...9E40 âœ… |
| **å¸‚åœºç»“ç®—** | UMA Optimistic Oracle | 0x2633...464a âœ… |
| **ä»£å¸ç®¡ç†** | Gnosis Conditional Tokens | 0xb171...0950 âœ… |
| **äº‰è®®å¤„ç†** | UMA Oracle æŠ•ç¥¨ | 0x2633...464a âœ… |

---

## ğŸš€ ç«‹å³æµ‹è¯•

### æœ€ç®€å•çš„éªŒè¯æ–¹æ³•

```bash
# 1. è¿è¡Œæµ‹è¯•ï¼ˆ30ç§’ï¼‰
npx hardhat run scripts/uma-oracle-test.js --network amoy

# 2. è®¿é—®åº”ç”¨ï¼ˆ30ç§’ï¼‰
# æ‰“å¼€: http://localhost:3000/grid-market

# 3. åˆ›å»ºæµ‹è¯•å¸‚åœºï¼ˆ5åˆ†é’Ÿï¼‰
# è®¿é—®: http://localhost:3000/_dev_only_admin/create-market
```

**å®Œæˆä»¥ä¸Š3æ­¥ï¼Œæ‚¨å°±éªŒè¯äº†ä¸‰å¤§ç»„ä»¶éƒ½åœ¨å·¥ä½œï¼** âœ…

---

**æ‚¨çš„äº§å“å·²ç»åœ¨ä½¿ç”¨ Polymarket å’Œ UMA çš„å®˜æ–¹ç»„ä»¶äº†ï¼** ğŸ‰

å‚è€ƒ **`æµ‹è¯•æ­¥éª¤-ä¸€æ­¥ä¸€æ­¥.md`** è·å–è¯¦ç»†çš„æµ‹è¯•æ­¥éª¤ï¼





