# 🚀 快速开始 - LUMI 产品测试

**所有功能已准备就绪，现在可以直接在测试网测试！**

---

## ⚡ 1分钟快速开始

### 第1步：清理测试数据

打开 Supabase SQL Editor，执行：

```sql
-- 清理测试数据
TRUNCATE TABLE orderbooks CASCADE;
TRUNCATE TABLE market_states CASCADE;
TRUNCATE TABLE orders CASCADE;
```

---

### 第2步：启动服务器

```bash
npm run dev
```

访问：`http://localhost:3000`

---

### 第3步：准备钱包

1. 安装 MetaMask
2. 切换到 **Polygon Amoy 测试网**
3. 获取测试币：https://faucet.polygon.technology/

---

## 🎯 核心功能测试

### ✅ 功能1：浏览市场

**访问**：`http://localhost:3000`

**测试项目**：
- [ ] 市场列表正常显示
- [ ] 点击市场卡片跳转详情页
- [ ] 分类筛选正常

---

### ✅ 功能2：市场详情页（新功能）

**访问**：`http://localhost:3000/market/[marketId]`

**测试新功能：**

#### 2.1 价格图表实时同步 ⚡
```sql
-- 在Supabase执行，观察图表变化
UPDATE orderbooks
SET 
  bids = '[{"price": 0.75, "quantity": 300}]'::jsonb,
  asks = '[{"price": 0.76, "quantity": 280}]'::jsonb,
  last_price = 0.755
WHERE market_id = 1;
```

**预期**：
- ⚡ 概率变为 75.5%
- 📊 图表自动重绘，终点移到 75.5%
- 🎨 平滑过渡

#### 2.2 手动刷新（不刷新页面）🔄
- [ ] 点击"刷新"按钮
- [ ] 观察图标旋转
- [ ] 文字显示"刷新中..."
- [ ] 数据更新完成
- [ ] 按钮恢复正常

**预期**：
- ✅ 页面不刷新
- ✅ 滚动位置保持
- ✅ 数据已更新

#### 2.3 Realtime连接状态 🟢
- [ ] 查看连接指示器
- [ ] 应该显示：🟢 **实时**
- [ ] 断网测试：变为 ⚪ **离线**
- [ ] 恢复网络：重新变为 🟢 **实时**

---

### ✅ 功能3：订单簿交易

**访问**：`http://localhost:3000/trade/[marketId]`

**测试项目：**
- [ ] 连接钱包
- [ ] 授权 Mock USDC
- [ ] 提交买单
- [ ] 提交卖单
- [ ] 查看订单历史

---

### ✅ 功能4：区块链市场

**访问**：`http://localhost:3000/blockchain-markets`

**测试项目：**
- [ ] 从链上读取市场
- [ ] 验证合约地址正确
- [ ] 官方组件地址显示

**应该显示的地址**：
- 适配器：`0xaBf0e29946C63fa1920E00bEA95dDADeF70FD80C`
- CTF Exchange：`0xdFE02Eb6733538f8Ea35D585af8DE5958AD99E40`
- Conditional Tokens：`0xb171BBc6b1476ee1b6aD4Ac2cA7ed4AfFdFa10a2`

---

### ✅ 功能5：黑天鹅预警

**访问**：`http://localhost:3000/black-swan`

**测试项目：**
- [ ] 历史事件列表
- [ ] K线图显示
- [ ] 预警指标
- [ ] 实时数据

---

## 🧪 Realtime测试（重要）

### 快速测试 Realtime 是否工作

1. **打开市场详情页**（任意市场）

2. **在 Supabase SQL Editor 执行**：
```sql
-- 为当前市场创建订单簿数据
INSERT INTO orderbooks (market_id, bids, asks, last_price, volume_24h)
VALUES (
  1,
  '[{"price": 0.60, "quantity": 200}]'::jsonb,
  '[{"price": 0.61, "quantity": 180}]'::jsonb,
  0.605,
  5000
)
ON CONFLICT (market_id) DO UPDATE SET
  bids = EXCLUDED.bids,
  asks = EXCLUDED.asks,
  last_price = EXCLUDED.last_price,
  volume_24h = EXCLUDED.volume_24h,
  updated_at = NOW();
```

3. **观察页面**：
   - ⚡ 在 < 1秒 内更新
   - 📊 图表自动移到 60.5%
   - 🟢 连接指示器显示"实时"
   - 💻 控制台显示更新日志

---

## 📋 测试清单总结

### 必测功能（核心）

- [ ] ✅ 市场列表显示
- [ ] ✅ 市场详情页加载
- [ ] ✅ 价格图表同步概率
- [ ] ✅ 手动刷新不刷新页面
- [ ] ✅ Realtime连接状态显示
- [ ] ✅ 订单簿Realtime更新（< 1秒）
- [ ] ✅ 钱包连接
- [ ] ✅ 官方组件地址正确

### 可选功能

- [ ] 市场激活流程
- [ ] 订单创建和匹配
- [ ] 黑天鹅预警
- [ ] 多语言切换
- [ ] 响应式布局

---

## 🎉 完成状态

已完成的优化：

✅ **价格图表实时同步** - 概率变化，图表立即更新  
✅ **数据刷新不刷新页面** - 点击按钮刷新，流畅体验  
✅ **Realtime状态可视化** - 连接状态一目了然  
✅ **错误处理优化** - 防止undefined崩溃  
✅ **视觉反馈完善** - 加载状态、动画效果  

---

## 🚀 立即开始测试

**现在就可以访问：**
```
http://localhost:3000
```

**选择任意市场，测试所有新功能！** 🎊

---

完成时间：2025-10-30  
状态：✅ 可以投入测试

