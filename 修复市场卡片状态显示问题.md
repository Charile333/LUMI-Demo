# ğŸ”§ ä¿®å¤å¸‚åœºå¡ç‰‡çŠ¶æ€æ˜¾ç¤ºé—®é¢˜

## âŒ é—®é¢˜åˆ†æ

ç”¨æˆ·åé¦ˆï¼š**å¸‚åœºå¡ç‰‡çš„æ„Ÿå…´è¶£å’Œæ¿€æ´»çŠ¶æ€æ²¡æœ‰æ˜¾ç¤º**

### æ ¹æœ¬åŸå› 

1. **Trending é¡µé¢**ï¼ˆ`app/trending/page.tsx`ï¼‰
   - âŒ ä½¿ç”¨**æ¨¡æ‹Ÿæ•°æ®**ï¼ˆ`mockMarkets`ï¼‰
   - âŒ ç¼ºå°‘ `blockchain_status` å­—æ®µ
   - âŒ ç¼ºå°‘ `interested_users` å­—æ®µ
   
2. **Earnings é¡µé¢**ï¼ˆ`app/earnings/page.tsx`ï¼‰
   - âŒ ä½¿ç”¨**æ¨¡æ‹Ÿæ•°æ®**ï¼ˆ`mockEarningsMarkets`ï¼‰
   - âŒ ç¼ºå°‘å¿…éœ€çš„å­—æ®µ

3. **Blockchain Markets é¡µé¢**ï¼ˆ`app/blockchain-markets/page.tsx`ï¼‰
   - âŒ ç›´æ¥ä»**åŒºå—é“¾è¯»å–**
   - âŒ è½¬æ¢åç¼ºå°‘ `blockchain_status`ã€`interested_users`

### MarketCard ç»„ä»¶éœ€è¦çš„å­—æ®µ

```typescript
interface MarketCardProps {
  market: {
    id: number;
    title: string;
    description: string;
    blockchain_status: string;     // âœ… å¿…éœ€ï¼æ§åˆ¶æ¿€æ´»çŠ¶æ€
    interested_users: number;      // âœ… å¿…éœ€ï¼æ˜¾ç¤ºæ„Ÿå…´è¶£äººæ•°
    views: number;
    activity_score: number;
    condition_id?: string;
    main_category?: string;
    priority_level?: string;
  };
  showPrice?: boolean;
}
```

### æ˜¾ç¤ºé€»è¾‘

```typescript
// MarketCard.tsx

// 1. æ¿€æ´»çŠ¶æ€ - å§‹ç»ˆæ˜¾ç¤º
<MarketActivationStatus 
  market={market} 
  onActivated={handleActivated}
/>

// 2. æ„Ÿå…´è¶£æŒ‰é’® - ä»…åœ¨æœªæ¿€æ´»æ—¶æ˜¾ç¤º
{market.blockchain_status === 'not_created' && (
  <InterestedButton 
    market={market}
    onUpdate={handleInterestedUpdate}
  />
)}
```

---

## âœ… è§£å†³æ–¹æ¡ˆ

### 1ï¸âƒ£ åˆ›å»ºçœŸå®å¸‚åœºåˆ—è¡¨é¡µé¢

**æ–°å»ºï¼š`app/markets/page.tsx`**

**ç‰¹æ€§ï¼š**
- âœ… ä» Supabase `markets` è¡¨è¯»å–æ•°æ®
- âœ… åŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ
- âœ… å®æ—¶ç­›é€‰ï¼ˆå…¨éƒ¨/å¾…æ¿€æ´»/å·²æ¿€æ´»ï¼‰
- âœ… ç»Ÿè®¡é¢æ¿
- âœ… åˆ·æ–°åŠŸèƒ½
- âœ… æ­£ç¡®æ˜¾ç¤ºæ¿€æ´»çŠ¶æ€å’Œæ„Ÿå…´è¶£æŒ‰é’®

**è®¿é—®è·¯å¾„ï¼š**
```
http://localhost:3000/markets
```

---

### 2ï¸âƒ£ æ•°æ®åº“ç»“æ„

**markets è¡¨å¿…éœ€å­—æ®µï¼š**

```sql
CREATE TABLE markets (
  id SERIAL PRIMARY KEY,
  
  -- åŸºæœ¬ä¿¡æ¯
  title TEXT NOT NULL,
  description TEXT,
  
  -- æ¿€æ´»çŠ¶æ€ï¼ˆå…³é”®ï¼ï¼‰
  blockchain_status TEXT DEFAULT 'not_created', 
  -- å¯é€‰å€¼: 'not_created', 'creating', 'created', 'failed'
  
  -- æ„Ÿå…´è¶£äººæ•°ï¼ˆå…³é”®ï¼ï¼‰
  interested_users INTEGER DEFAULT 0,
  
  -- é“¾ä¸Šæ ‡è¯†
  condition_id TEXT,
  question_id TEXT UNIQUE,
  
  -- å…¶ä»–
  main_category TEXT DEFAULT 'emerging',
  priority_level TEXT DEFAULT 'normal',
  views INTEGER DEFAULT 0,
  activity_score INTEGER DEFAULT 0,
  
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

---

### 3ï¸âƒ£ æµ‹è¯•æ•°æ®

**æ’å…¥æµ‹è¯•å¸‚åœºï¼š**

```sql
-- æ’å…¥ä¸€ä¸ªå¾…æ¿€æ´»çš„å¸‚åœº
INSERT INTO markets (
  title,
  description,
  blockchain_status,
  interested_users,
  main_category,
  priority_level,
  views,
  activity_score
) VALUES (
  'Will BTC reach $100,000 by end of 2024?',
  'Predict if Bitcoin will hit the $100k milestone before Dec 31, 2024',
  'not_created',
  3,
  'tech-ai',
  'hot',
  156,
  85
);

-- æ’å…¥ä¸€ä¸ªå·²æ¿€æ´»çš„å¸‚åœº
INSERT INTO markets (
  title,
  description,
  blockchain_status,
  interested_users,
  condition_id,
  main_category,
  priority_level,
  views,
  activity_score
) VALUES (
  'Will ETH surpass $5,000 in 2024?',
  'Will Ethereum reach $5,000 before the end of 2024?',
  'created',
  15,
  '0x1234...abcd',
  'tech-ai',
  'recommended',
  432,
  92
);

-- æ’å…¥å¦ä¸€ä¸ªå¾…æ¿€æ´»çš„å¸‚åœº
INSERT INTO markets (
  title,
  description,
  blockchain_status,
  interested_users,
  main_category,
  views,
  activity_score
) VALUES (
  'Tesla Q4 deliveries exceed 500K?',
  'Will Tesla deliver more than 500,000 vehicles in Q4 2024?',
  'not_created',
  7,
  'automotive',
  298,
  76
);
```

---

## ğŸ¨ UI æ˜¾ç¤ºæ•ˆæœ

### å¾…æ¿€æ´»å¸‚åœºï¼ˆblockchain_status = 'not_created'ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Will BTC reach $100,000 by 2024?       â”‚
â”‚                                            â”‚
â”‚ âš ï¸ å¸‚åœºå°šæœªæ¿€æ´»                            â”‚
â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â”‚
â”‚ â•‘ 3 äººå·²æ„Ÿå…´è¶£    è¿˜éœ€ 2 äºº           â•‘    â”‚
â”‚ â•‘ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 60%             â•‘    â”‚
â”‚ â•‘ ğŸ’¡ ç‚¹å‡»"æˆ‘æ„Ÿå…´è¶£"åŠ é€Ÿæ¿€æ´»           â•‘    â”‚
â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                            â”‚
â”‚ â­ æˆ‘å¯¹è¿™ä¸ªå¸‚åœºæ„Ÿå…´è¶£                      â”‚
â”‚ ğŸ“– æŸ¥çœ‹è¯¦æƒ…                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¿€æ´»ä¸­å¸‚åœºï¼ˆblockchain_status = 'creating'ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Will BTC reach $100,000 by 2024?       â”‚
â”‚                                            â”‚
â”‚ ğŸš€ æ­£åœ¨æ¿€æ´»å¸‚åœº...                         â”‚
â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â”‚
â”‚ â•‘ [spinner] é¢„è®¡å‰©ä½™æ—¶é—´: 15 ç§’      â•‘    â”‚
â”‚ â•‘ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 50%        â•‘    â”‚
â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                            â”‚
â”‚ ğŸ“– æŸ¥çœ‹è¯¦æƒ…                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å·²æ¿€æ´»å¸‚åœºï¼ˆblockchain_status = 'created'ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Will BTC reach $100,000 by 2024?       â”‚
â”‚                                            â”‚
â”‚ âœ… å¸‚åœºå·²æ¿€æ´»                              â”‚
â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â”‚
â”‚ â•‘ âœ“ å¯ä»¥å¼€å§‹äº¤æ˜“äº†ï¼                 â•‘    â”‚
â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚ â”‚ YES  65.5%        NO  34.5%      â”‚      â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚ â”‚ ä¹°: $0.65  å–: $0.66  ğŸŸ¢ 1.0%   â”‚      â”‚
â”‚ â”‚ ğŸ“Š 24h: $25,000     ğŸŸ¢ å®æ—¶      â”‚      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                            â”‚
â”‚ ğŸ’° å¼€å§‹äº¤æ˜“ | ğŸ“– æŸ¥çœ‹è¯¦æƒ…                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. åˆ›å»ºæµ‹è¯•æ•°æ®

åœ¨ Supabase SQL Editor æ‰§è¡Œä¸Šé¢çš„æ’å…¥è¯­å¥ã€‚

### 2. è®¿é—®å¸‚åœºé¡µé¢

```
http://localhost:3000/markets
```

### 3. éªŒè¯æ˜¾ç¤º

#### âœ… å¾…æ¿€æ´»å¸‚åœºåº”æ˜¾ç¤ºï¼š
- [ ] é»„è‰²"å¸‚åœºå°šæœªæ¿€æ´»"æ¡†
- [ ] æ„Ÿå…´è¶£äººæ•°å’Œè¿›åº¦æ¡
- [ ] "è¿˜éœ€ X äºº"æç¤º
- [ ] â­ "æˆ‘å¯¹è¿™ä¸ªå¸‚åœºæ„Ÿå…´è¶£"æŒ‰é’®

#### âœ… å·²æ¿€æ´»å¸‚åœºåº”æ˜¾ç¤ºï¼š
- [ ] ç»¿è‰²"å¸‚åœºå·²æ¿€æ´»"æ¡†
- [ ] "å¯ä»¥å¼€å§‹äº¤æ˜“äº†ï¼"æç¤º
- [ ] ä»·æ ¼åŒºåŸŸï¼ˆæ¦‚ç‡ã€ä¹°å–ä»·ã€äº¤æ˜“é‡ï¼‰
- [ ] ğŸ’° "å¼€å§‹äº¤æ˜“"æŒ‰é’®
- [ ] **ä¸æ˜¾ç¤º**"æˆ‘æ„Ÿå…´è¶£"æŒ‰é’®

### 4. æµ‹è¯•æ„Ÿå…´è¶£åŠŸèƒ½

1. è¿æ¥ MetaMask é’±åŒ…
2. ç‚¹å‡»"æˆ‘å¯¹è¿™ä¸ªå¸‚åœºæ„Ÿå…´è¶£"
3. ç¡®è®¤äº¤æ˜“
4. è§‚å¯Ÿï¼š
   - æ„Ÿå…´è¶£äººæ•° +1
   - è¿›åº¦æ¡æ›´æ–°
   - å¦‚æœè¾¾åˆ° 5 äººï¼Œå¸‚åœºè‡ªåŠ¨æ¿€æ´»

---

## ğŸ”„ æ¿€æ´»æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»"æˆ‘æ„Ÿå…´è¶£"
    â†“
/api/markets/{id}/interested (POST)
    â†“
æ›´æ–° markets è¡¨
    â”œâ”€ interested_users += 1
    â””â”€ updated_at = NOW()
    â†“
æ£€æŸ¥æ˜¯å¦è¾¾åˆ°é˜ˆå€¼ï¼ˆ5äººï¼‰
    â†“ (æ˜¯)
è§¦å‘æ¿€æ´»
    â”œâ”€ blockchain_status = 'creating'
    â”œâ”€ è°ƒç”¨ RealUmaCTFAdapter
    â”œâ”€ åˆ›å»ºå¸‚åœºï¼ˆUMA + Conditional Tokensï¼‰
    â””â”€ è¿”å› condition_id
    â†“
æ›´æ–° markets è¡¨
    â”œâ”€ blockchain_status = 'created'
    â”œâ”€ condition_id = è¿”å›çš„ID
    â””â”€ updated_at = NOW()
    â†“
WebSocket é€šçŸ¥æ‰€æœ‰å®¢æˆ·ç«¯
    â†“
MarketCard è‡ªåŠ¨æ›´æ–°
    â”œâ”€ éšè—"æ„Ÿå…´è¶£"æŒ‰é’®
    â”œâ”€ æ˜¾ç¤º"å·²æ¿€æ´»"çŠ¶æ€
    â””â”€ æ˜¾ç¤ºä»·æ ¼å’Œäº¤æ˜“æŒ‰é’®
```

---

## ğŸ“‹ ä¿®æ”¹æ¸…å•

### âœ… æ–°å¢æ–‡ä»¶

1. **app/markets/page.tsx**
   - çœŸå®å¸‚åœºåˆ—è¡¨é¡µé¢
   - ä» Supabase è¯»å–å®Œæ•´æ•°æ®
   - æ­£ç¡®æ˜¾ç¤ºæ‰€æœ‰çŠ¶æ€

### âœ… ä¿ç•™ä½†éœ€æ³¨æ„çš„æ–‡ä»¶

1. **app/trending/page.tsx**
   - âš ï¸ ä»ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
   - ğŸ”§ å°†æ¥éœ€è¦æ”¹ä¸ºè¯»å–çœŸå®æ•°æ®

2. **app/earnings/page.tsx**
   - âš ï¸ ä»ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
   - ğŸ”§ å°†æ¥éœ€è¦æ”¹ä¸ºè¯»å–çœŸå®æ•°æ®

3. **app/blockchain-markets/page.tsx**
   - âš ï¸ ç›´æ¥ä»åŒºå—é“¾è¯»å–
   - ğŸ”§ é€‚åˆæŠ€æœ¯å±•ç¤ºï¼Œä½†ç¼ºå°‘æ¿€æ´»åŠŸèƒ½

---

## ğŸ¯ æ€»ç»“

### é—®é¢˜æ ¹æº

å…¶ä»–é¡µé¢ä½¿ç”¨**æ¨¡æ‹Ÿæ•°æ®æˆ–ç›´æ¥åŒºå—é“¾æ•°æ®**ï¼Œç¼ºå°‘ `blockchain_status` å’Œ `interested_users` å­—æ®µã€‚

### è§£å†³æ–¹æ¡ˆ

åˆ›å»º **`/markets` é¡µé¢**ï¼Œä» Supabase è¯»å–å®Œæ•´æ•°æ®ã€‚

### ç«‹å³æµ‹è¯•

1. åœ¨ Supabase æ’å…¥æµ‹è¯•æ•°æ®
2. è®¿é—® `http://localhost:3000/markets`
3. è§‚å¯Ÿï¼š
   - å¾…æ¿€æ´»å¸‚åœºæ˜¾ç¤ºæ¿€æ´»è¿›åº¦
   - å·²æ¿€æ´»å¸‚åœºæ˜¾ç¤ºä»·æ ¼
   - æ„Ÿå…´è¶£æŒ‰é’®æ­£å¸¸æ˜¾ç¤º

### ä¸‹ä¸€æ­¥ä¼˜åŒ–

å°† trendingã€earnings ç­‰é¡µé¢ä¹Ÿæ”¹ä¸ºä» Supabase è¯»å–æ•°æ®ã€‚

---

å®Œæˆæ—¶é—´ï¼š2025-10-30  
çŠ¶æ€ï¼šâœ… é—®é¢˜å·²ä¿®å¤

