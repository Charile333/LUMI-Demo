# ğŸ“Š æ•°æ®æµè¯¦ç»†è¯´æ˜

## ğŸ¯ ä½ çš„é—®é¢˜

> å½“æˆ‘åœ¨å‰ç«¯åå°åˆ›å»ºå¸‚åœºï¼Œå¸‚åœºæ•°æ®ä¼šåˆ°å“ªï¼Ÿ  
> æ•°æ®åº“å—ï¼Ÿç„¶åé“¾ä¸‹è¯»å–æ•°æ®åº“å—ï¼Ÿ

**ç­”æ¡ˆ**ï¼šæ˜¯çš„ï¼å®Œå…¨æ­£ç¡®ï¼âœ…

---

## ğŸ“‹ å®Œæ•´æ•°æ®æµå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ç¬¬ 1 é˜¶æ®µï¼šåˆ›å»ºå¸‚åœºï¼ˆæ•°æ®åº“ï¼‰                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç®¡ç†åå°é¡µé¢
app/admin/create-market/page.tsx
         â”‚
         â”‚ å¡«å†™è¡¨å•ï¼š
         â”‚ - æ ‡é¢˜: "ç‰¹æ–¯æ‹‰ Q1 é¢„æµ‹"
         â”‚ - æè¿°: "..."
         â”‚ - åˆ†ç±»: automotive
         â”‚
         â†“ HTTP POST
         
API è·¯ç”±
app/api/admin/markets/create/route.ts
         â”‚
         â”‚ const result = await db.query(
         â”‚   `INSERT INTO markets (title, description, ...)
         â”‚    VALUES ($1, $2, ...)`
         â”‚ );
         â”‚
         â†“ SQL INSERT
         
PostgreSQL / Supabase æ•°æ®åº“
markets è¡¨
         â”‚
         â”‚ ä¿å­˜æ•°æ®:
         â”‚ {
         â”‚   id: 1,
         â”‚   title: "ç‰¹æ–¯æ‹‰ Q1 é¢„æµ‹",
         â”‚   status: 'draft',            â† è‰ç¨¿çŠ¶æ€
         â”‚   blockchain_status: 'not_created',  â† æœªä¸Šé“¾
         â”‚   condition_id: null,         â† è¿˜æ²¡æœ‰é“¾ä¸Š ID
         â”‚   views: 0,
         â”‚   interested_users: 0
         â”‚ }
         â”‚
         âœ… å®Œæˆï¼æˆæœ¬ $0ï¼Œè€—æ—¶ < 100ms
```

---

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ç¬¬ 2 é˜¶æ®µï¼šå‰ç«¯æ˜¾ç¤ºå¸‚åœºï¼ˆé“¾ä¸‹è¯»å–ï¼‰               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç”¨æˆ·è®¿é—®å‰ç«¯é¡µé¢
app/markets/page.tsx
         â”‚
         â”‚ useEffect(() => {
         â”‚   loadMarkets();
         â”‚ });
         â”‚
         â†“ HTTP GET
         
API è·¯ç”±ï¼ˆè¯»å–æ•°æ®ï¼‰
app/api/markets/route.ts æˆ–
app/api/markets/[marketId]/route.ts
         â”‚
         â”‚ const { data } = await supabase
         â”‚   .from('markets')
         â”‚   .select('*')
         â”‚   .eq('blockchain_status', 'not_created');
         â”‚
         â†“ SQL SELECT
         
PostgreSQL / Supabase æ•°æ®åº“
markets è¡¨
         â”‚
         â”‚ è¿”å›æ•°æ®:
         â”‚ [{
         â”‚   id: 1,
         â”‚   title: "ç‰¹æ–¯æ‹‰ Q1 é¢„æµ‹",
         â”‚   blockchain_status: 'not_created',
         â”‚   ...
         â”‚ }]
         â”‚
         â†“ JSON å“åº”
         
å‰ç«¯é¡µé¢æ˜¾ç¤º
components/MarketCard.tsx
         â”‚
         â”‚ æ˜¾ç¤º:
         â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ â”‚ ç‰¹æ–¯æ‹‰ Q1 é¢„æµ‹        â”‚
         â”‚ â”‚ å¸‚åœºå°šæœªæ¿€æ´»          â”‚
         â”‚ â”‚ [æˆ‘æ„Ÿå…´è¶£] [æ¿€æ´»äº¤æ˜“] â”‚
         â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         âœ… å®Œå…¨é“¾ä¸‹è¯»å–ï¼ä¸è°ƒç”¨åŒºå—é“¾
```

---

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ç¬¬ 3 é˜¶æ®µï¼šæ¿€æ´»å¸‚åœºï¼ˆä¸Šé“¾ï¼‰                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç”¨æˆ·ç‚¹å‡»"æ¿€æ´»å¹¶äº¤æ˜“"æˆ–
æ„Ÿå…´è¶£äººæ•°è¾¾åˆ° 5 äººï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰
         â”‚
         â†“ HTTP POST
         
API è·¯ç”±
app/api/admin/markets/[marketId]/activate/route.ts
         â”‚
         â”‚ activateMarketOnChain(marketId)
         â”‚
         â†“
         
é“¾ä¸Šæ¿€æ´»é€»è¾‘
lib/market-activation/blockchain-activator.ts
         â”‚
         â”‚ // 1. ä»æ•°æ®åº“è¯»å–å¸‚åœºä¿¡æ¯
         â”‚ const market = await db.query(
         â”‚   `SELECT * FROM markets WHERE id = $1`
         â”‚ );
         â”‚
         â”‚ // 2. ä½¿ç”¨å¹³å°é’±åŒ…è°ƒç”¨æ™ºèƒ½åˆçº¦
         â”‚ const tx = await adapter.initialize(
         â”‚   questionId,
         â”‚   market.title,
         â”‚   market.description,
         â”‚   2, // YES/NO
         â”‚   USDC_ADDRESS,
         â”‚   rewardAmount,
         â”‚   0
         â”‚ );
         â”‚
         â†“ åŒºå—é“¾äº¤æ˜“
         
Polygon Amoy åŒºå—é“¾
TestUmaCTFAdapter åˆçº¦
         â”‚
         â”‚ é“¾ä¸Šåˆ›å»ºå¸‚åœº:
         â”‚ - ç”Ÿæˆ conditionId
         â”‚ - è°ƒç”¨ ConditionalTokens
         â”‚ - è°ƒç”¨ Oracle
         â”‚ - å‘å‡ºäº‹ä»¶
         â”‚
         â†“ äº¤æ˜“ç¡®è®¤ï¼ˆ30 ç§’ï¼‰
         
æ›´æ–°æ•°æ®åº“
         â”‚
         â”‚ await db.query(
         â”‚   `UPDATE markets 
         â”‚    SET blockchain_status = 'created',
         â”‚        condition_id = $1,
         â”‚        activated_at = NOW()
         â”‚    WHERE id = $2`
         â”‚ );
         â”‚
         â†“
         
æ•°æ®åº“ç°åœ¨æœ‰å®Œæ•´æ•°æ®:
{
  id: 1,
  title: "ç‰¹æ–¯æ‹‰ Q1 é¢„æµ‹",
  status: 'active',            â† å·²æ¿€æ´»
  blockchain_status: 'created', â† å·²ä¸Šé“¾
  condition_id: '0xea6d...',   â† é“¾ä¸Š ID
  ...
}
         â”‚
         âœ… æ¿€æ´»å®Œæˆï¼ç°åœ¨å¯ä»¥äº¤æ˜“
```

---

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ç¬¬ 4 é˜¶æ®µï¼šç”¨æˆ·äº¤æ˜“ï¼ˆæ··åˆæ¨¡å¼ï¼‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å‰ç«¯è¯»å–å¸‚åœº
         â”‚
         â”‚ // ä»æ•°æ®åº“è¯»å–åŸºæœ¬ä¿¡æ¯ï¼ˆå¿«ï¼‰
         â”‚ const market = await fetch(
         â”‚   `/api/markets/${marketId}`
         â”‚ );
         â”‚
         â†“ æ•°æ®åº“
         
è¿”å›å¸‚åœºä¿¡æ¯ï¼ˆåŒ…å« condition_idï¼‰
         â”‚
         â”‚ {
         â”‚   id: 1,
         â”‚   condition_id: '0xea6d...',
         â”‚   blockchain_status: 'created'
         â”‚ }
         â”‚
         â†“
         
ç”¨æˆ·æäº¤è®¢å•ï¼ˆé“¾ä¸‹ï¼‰
         â”‚
         â”‚ // EIP-712 ç­¾å
         â”‚ const signature = await signOrder(order, signer);
         â”‚
         â”‚ // æäº¤åˆ°æ•°æ®åº“ï¼ˆä¸ä¸Šé“¾ï¼‰
         â”‚ await fetch('/api/orders/create', {
         â”‚   body: JSON.stringify({ ...order, signature })
         â”‚ });
         â”‚
         â†“ ä¿å­˜åˆ°æ•°æ®åº“
         
orders è¡¨ï¼ˆPostgreSQLï¼‰
         â”‚
         â”‚ é“¾ä¸‹åŒ¹é…:
         â”‚ - æŸ¥æ‰¾ç›¸åæ–¹å‘è®¢å•
         â”‚ - ä»·æ ¼åŒ¹é…
         â”‚ - ç”Ÿæˆæˆäº¤è®°å½•
         â”‚
         â†“ æ‰¹é‡ç»“ç®—ï¼ˆæ¯ 5 åˆ†é’Ÿï¼‰
         
åŒºå—é“¾ç»“ç®—
         â”‚
         â”‚ // å®šæ—¶ä»»åŠ¡è°ƒç”¨
         â”‚ await ctfExchange.fillOrders(
         â”‚   orders, signatures, amounts
         â”‚ );
         â”‚
         âœ… æœ€ç»ˆåœ¨é“¾ä¸Šç»“ç®—
```

---

## ğŸ¯ å…³é”®ç‚¹ç†è§£

### âœ… æ•°æ®åœ¨å“ªé‡Œï¼Ÿ

| é˜¶æ®µ | æ•°æ®ä½ç½® | è¯´æ˜ |
|------|---------|------|
| **åˆ›å»ºå¸‚åœº** | æ•°æ®åº“ | 100% é“¾ä¸‹ |
| **æ˜¾ç¤ºå¸‚åœº** | æ•°æ®åº“ | 100% é“¾ä¸‹ï¼ˆå¿«é€Ÿï¼‰ |
| **æ¿€æ´»å‰** | æ•°æ®åº“ | é“¾ä¸‹ |
| **æ¿€æ´»å** | æ•°æ®åº“ + åŒºå—é“¾ | æ··åˆï¼ˆæ•°æ®åº“æœ‰å…ƒæ•°æ®ï¼ŒåŒºå—é“¾æœ‰ conditionIdï¼‰ |
| **è®¢å•åŒ¹é…** | æ•°æ®åº“ | é“¾ä¸‹ï¼ˆå¿«é€Ÿï¼‰ |
| **è®¢å•ç»“ç®—** | åŒºå—é“¾ | æ‰¹é‡ä¸Šé“¾ |

### âœ… è¯»å–æ•°æ®ä»å“ªé‡Œï¼Ÿ

```typescript
// âœ… æ­£ç¡®ç†è§£ï¼š

// 1. å‰ç«¯æ˜¾ç¤ºå¸‚åœºåˆ—è¡¨ï¼ˆé“¾ä¸‹è¯»å–ï¼‰
const markets = await fetch('/api/markets'); 
// â†’ ä»æ•°æ®åº“è¯»å– âœ…
// â†’ ä¸è°ƒç”¨åŒºå—é“¾ âœ…
// â†’ é€Ÿåº¦å¿« < 100ms âœ…

// 2. æ˜¾ç¤ºå¸‚åœºè¯¦æƒ…ï¼ˆé“¾ä¸‹è¯»å–ï¼‰
const market = await fetch(`/api/markets/${id}`);
// â†’ ä»æ•°æ®åº“è¯»å– âœ…
// â†’ åŒ…å«æ‰€æœ‰ä¿¡æ¯ âœ…

// 3. åªæœ‰åœ¨éœ€è¦äº¤æ˜“æ—¶æ‰è¯»åŒºå—é“¾
if (market.blockchain_status === 'created') {
  // ç°åœ¨ä»åŒºå—é“¾è¯»å– Token ä½™é¢ç­‰
  const balance = await ctf.balanceOf(address, tokenId);
  // â†’ è¿™æ­¥æ‰è°ƒç”¨åŒºå—é“¾ âœ…
}
```

---

## ğŸ“Š æ•°æ®åº“è¡¨ç»“æ„

```sql
CREATE TABLE markets (
  id SERIAL PRIMARY KEY,
  
  -- åŸºæœ¬ä¿¡æ¯ï¼ˆä¸€ç›´åœ¨æ•°æ®åº“ï¼‰
  title TEXT NOT NULL,
  description TEXT,
  main_category TEXT,
  image_url TEXT,
  
  -- çŠ¶æ€ï¼ˆä¸€ç›´åœ¨æ•°æ®åº“ï¼‰
  status TEXT DEFAULT 'draft',
  blockchain_status TEXT DEFAULT 'not_created',
  
  -- é“¾ä¸Šä¿¡æ¯ï¼ˆæ¿€æ´»åå¡«å……ï¼‰
  question_id TEXT,        â† ç”Ÿæˆæ—¶å°±æœ‰ï¼Œä½†è¿˜æœªä¸Šé“¾
  condition_id TEXT,       â† æ¿€æ´»åæ‰æœ‰
  adapter_address TEXT,    â† æ¿€æ´»åæ‰æœ‰
  activated_at TIMESTAMP,  â† æ¿€æ´»æ—¶é—´
  
  -- æ´»è·ƒåº¦æŒ‡æ ‡ï¼ˆä¸€ç›´åœ¨æ•°æ®åº“ï¼‰
  views INTEGER DEFAULT 0,
  interested_users INTEGER DEFAULT 0,
  activity_score DECIMAL DEFAULT 0
);
```

---

## ğŸ” å®é™…ä¾‹å­

### ä¾‹å­ï¼šåˆ›å»ºåˆ°æ˜¾ç¤ºçš„å®Œæ•´æµç¨‹

#### Step 1: ç®¡ç†å‘˜åˆ›å»ºå¸‚åœº
```typescript
// å‰ç«¯æäº¤è¡¨å•
fetch('/api/admin/markets/create', {
  method: 'POST',
  body: JSON.stringify({
    title: "ç‰¹æ–¯æ‹‰æµ‹è¯•",
    description: "æµ‹è¯•å¸‚åœº",
    mainCategory: "automotive"
  })
})

// API å¤„ç†
db.query(`INSERT INTO markets (title, ...) VALUES (...)`)

// æ•°æ®åº“ç°åœ¨æœ‰:
{
  id: 1,
  title: "ç‰¹æ–¯æ‹‰æµ‹è¯•",
  blockchain_status: "not_created", â† é‡ç‚¹ï¼
  condition_id: null                â† é‡ç‚¹ï¼
}
```

#### Step 2: ç”¨æˆ·æµè§ˆå¸‚åœº
```typescript
// å‰ç«¯è¯·æ±‚
const res = await fetch('/api/markets/1');
const market = await res.json();

// è¿”å›çš„æ•°æ®ï¼ˆä»æ•°æ®åº“ï¼‰:
{
  id: 1,
  title: "ç‰¹æ–¯æ‹‰æµ‹è¯•",
  blockchain_status: "not_created", â† å‰ç«¯çŸ¥é“æœªæ¿€æ´»
  condition_id: null
}

// å‰ç«¯æ˜¾ç¤º:
<MarketCard market={market}>
  {market.blockchain_status === 'not_created' && (
    <div>å¸‚åœºå°šæœªæ¿€æ´»</div>
    <InterestedButton />
    <TradeButton>æ¿€æ´»å¹¶äº¤æ˜“</TradeButton>
  )}
</MarketCard>
```

#### Step 3: ç”¨æˆ·æ ‡è®°æ„Ÿå…´è¶£
```typescript
// å‰ç«¯è¯·æ±‚
fetch('/api/markets/1/interested', {
  method: 'POST',
  body: JSON.stringify({ userAddress: "0x..." })
})

// API æ›´æ–°æ•°æ®åº“
db.query(`UPDATE markets SET interested_users = interested_users + 1 WHERE id = 1`)

// æ•°æ®åº“ç°åœ¨:
{
  id: 1,
  interested_users: 1,  â† æ›´æ–°äº†
  activity_score: 9     â† é‡æ–°è®¡ç®—äº†
}

// WebSocket é€šçŸ¥æ‰€æœ‰åœ¨çº¿ç”¨æˆ·
broadcastInterestedUpdate(1, {
  interestedUsers: 1,
  progress: 20%
})

// æ‰€æœ‰æµè§ˆå™¨å®æ—¶æ›´æ–°æ˜¾ç¤º "1/5 äººæ„Ÿå…´è¶£"
```

#### Step 4: è¾¾åˆ°æ¿€æ´»æ¡ä»¶
```typescript
// ç¬¬ 5 ä¸ªäººæ ‡è®°æ„Ÿå…´è¶£
interested_users: 5

// å®šæ—¶ä»»åŠ¡æ‰«æï¼ˆæ¯å°æ—¶ï¼‰
const markets = db.query(`
  SELECT * FROM markets
  WHERE blockchain_status = 'not_created'
    AND interested_users >= 5
`)

// æ‰¾åˆ°å¸‚åœº ID 1ï¼Œå¼€å§‹æ¿€æ´»
activateMarketOnChain(1)
```

#### Step 5: é“¾ä¸Šæ¿€æ´»
```typescript
// blockchain-activator.ts

// 1. ä»æ•°æ®åº“è¯»å–å¸‚åœº
const market = await db.query(`SELECT * FROM markets WHERE id = 1`);
// â†’ title: "ç‰¹æ–¯æ‹‰æµ‹è¯•"

// 2. è°ƒç”¨æ™ºèƒ½åˆçº¦
const tx = await adapter.initialize(
  questionId,
  market.title,        â† ä½¿ç”¨æ•°æ®åº“çš„æ•°æ®
  market.description,  â† ä½¿ç”¨æ•°æ®åº“çš„æ•°æ®
  2,
  USDC_ADDRESS,
  rewardAmount,
  0
);

// 3. ç­‰å¾…äº¤æ˜“ç¡®è®¤ï¼ˆ30 ç§’ï¼‰
const receipt = await tx.wait();

// 4. è·å– conditionId
const conditionId = "0xea6d...";

// 5. æ›´æ–°æ•°æ®åº“
await db.query(`
  UPDATE markets
  SET blockchain_status = 'created',
      condition_id = $1,
      activated_at = NOW()
  WHERE id = 1
`, [conditionId]);

// æ•°æ®åº“ç°åœ¨:
{
  id: 1,
  title: "ç‰¹æ–¯æ‹‰æµ‹è¯•",
  blockchain_status: "created",    â† å·²ä¸Šé“¾
  condition_id: "0xea6d...",       â† æœ‰é“¾ä¸Š ID äº†
  activated_at: "2024-10-24..."
}
```

#### Step 6: æ¿€æ´»åæ˜¾ç¤º
```typescript
// å‰ç«¯é‡æ–°è¯·æ±‚
const market = await fetch('/api/markets/1');

// è¿”å›ï¼ˆä»æ•°æ®åº“ï¼‰:
{
  id: 1,
  blockchain_status: "created",    â† å‰ç«¯çŸ¥é“å·²æ¿€æ´»
  condition_id: "0xea6d..."        â† æœ‰é“¾ä¸Š ID
}

// å‰ç«¯æ˜¾ç¤º:
<MarketCard>
  {market.blockchain_status === 'created' && (
    <div>âœ… å¸‚åœºå·²æ¿€æ´»</div>
    <TradeButton>ç«‹å³äº¤æ˜“</TradeButton>  â† å¯ä»¥äº¤æ˜“äº†
  )}
</MarketCard>
```

#### Step 7: ç”¨æˆ·äº¤æ˜“
```typescript
// ç°åœ¨å¯ä»¥è°ƒç”¨é“¾ä¸Šåˆçº¦äº†
const ctf = new ethers.Contract(CTF_ADDRESS, CTF_ABI, signer);

// ä½¿ç”¨æ•°æ®åº“ä¸­çš„ condition_id
await ctf.splitPosition(
  USDC_ADDRESS,
  PARENT_COLLECTION_ID,
  market.condition_id,  â† ä»æ•°æ®åº“è·å–
  partition,
  amount
);
```

---

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

### âœ… æ•°æ®åº“æ˜¯"ä¸»æ•°æ®æº"

```
æ•°æ®åº“å­˜å‚¨:
  âœ… å¸‚åœºæ ‡é¢˜ã€æè¿°
  âœ… åˆ†ç±»ã€æ ‡ç­¾
  âœ… æ—¶é—´è®¾ç½®
  âœ… çŠ¶æ€ç®¡ç†
  âœ… æ´»è·ƒåº¦æ•°æ®
  âœ… é“¾ä¸Š IDï¼ˆæ¿€æ´»åï¼‰
  
åŒºå—é“¾å­˜å‚¨:
  âœ… conditionIdï¼ˆå¸‚åœºå”¯ä¸€æ ‡è¯†ï¼‰
  âœ… questionId
  âœ… Token åˆçº¦çŠ¶æ€
  âœ… é¢„è¨€æœºæ•°æ®
```

### âœ… æ··åˆè¯»å–ç­–ç•¥

```typescript
// è¯»å–å¸‚åœºä¿¡æ¯ â†’ æ•°æ®åº“ï¼ˆå¿«ï¼‰
const market = await supabase.from('markets').select('*');

// è¯»å– Token ä½™é¢ â†’ åŒºå—é“¾ï¼ˆæ…¢ï¼‰
const balance = await ctf.balanceOf(address, tokenId);

// è¯»å–è®¢å•ç°¿ â†’ æ•°æ®åº“ï¼ˆå¿«ï¼‰
const orderBook = await db.query(`SELECT * FROM orders WHERE market_id = 1`);

// æœ€ç»ˆç»“ç®— â†’ åŒºå—é“¾ï¼ˆå®‰å…¨ï¼‰
await ctfExchange.fillOrders(...);
```

---

## ğŸ“‹ å®Œæ•´æ•°æ®æµæ€»ç»“

### åˆ›å»ºé˜¶æ®µ
```
åå°è¡¨å• â†’ API â†’ æ•°æ®åº“ âœ…
æˆæœ¬: $0
é€Ÿåº¦: < 100ms
ä½ç½®: 100% é“¾ä¸‹
```

### æ˜¾ç¤ºé˜¶æ®µ
```
å‰ç«¯é¡µé¢ â†’ API â†’ æ•°æ®åº“ â†’ è¿”å› JSON âœ…
æˆæœ¬: $0
é€Ÿåº¦: < 100ms
ä½ç½®: 100% é“¾ä¸‹
```

### æ¿€æ´»é˜¶æ®µ
```
è§¦å‘æ¡ä»¶ â†’ API â†’ è¯»æ•°æ®åº“ â†’ è°ƒåˆçº¦ â†’ æ›´æ–°æ•°æ®åº“ âœ…
æˆæœ¬: ~$0.10ï¼ˆå¹³å°æ”¯ä»˜ï¼‰
é€Ÿåº¦: ~30 ç§’
ä½ç½®: é“¾ä¸‹è¯»å– â†’ é“¾ä¸Šå†™å…¥ â†’ é“¾ä¸‹æ›´æ–°
```

### äº¤æ˜“é˜¶æ®µ
```
ç”¨æˆ·ä¸‹å• â†’ API â†’ æ•°æ®åº“åŒ¹é… â†’ æ‰¹é‡ç»“ç®— â†’ åŒºå—é“¾ âœ…
æˆæœ¬: $0ï¼ˆé“¾ä¸‹ï¼‰+ æ‰¹é‡ç»“ç®—ï¼ˆèŠ‚çœ 70%ï¼‰
é€Ÿåº¦: < 100msï¼ˆé“¾ä¸‹ï¼‰
ä½ç½®: å¤§éƒ¨åˆ†é“¾ä¸‹ï¼Œæœ€ç»ˆé“¾ä¸Šç¡®è®¤
```

---

## ğŸ’¡ ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ

### ä¼˜åŠ¿å¯¹æ¯”

**çº¯åŒºå—é“¾æ–¹æ¡ˆ**ï¼š
```
åˆ›å»ºå¸‚åœº â†’ ç«‹å³ä¸Šé“¾
æ˜¾ç¤ºå¸‚åœº â†’ ä»é“¾ä¸Šè¯»å–ï¼ˆæ…¢ï¼‰
è®¢å• â†’ æ¯ç¬”éƒ½ä¸Šé“¾ï¼ˆè´µï¼‰

æˆæœ¬: é«˜ âŒ
é€Ÿåº¦: æ…¢ âŒ
```

**æˆ‘ä»¬çš„æ–¹æ¡ˆï¼ˆæ•°æ®åº“ + åŒºå—é“¾ï¼‰**ï¼š
```
åˆ›å»ºå¸‚åœº â†’ æ•°æ®åº“ï¼ˆå…è´¹ï¼‰
æ˜¾ç¤ºå¸‚åœº â†’ æ•°æ®åº“ï¼ˆå¿«é€Ÿï¼‰
è®¢å• â†’ æ•°æ®åº“åŒ¹é…ï¼ˆå¿«é€Ÿï¼‰+ é“¾ä¸Šç»“ç®—ï¼ˆå®‰å…¨ï¼‰

æˆæœ¬: èŠ‚çœ 80-90% âœ…
é€Ÿåº¦: 10-100 å€æå‡ âœ…
```

---

## âœ… æ€»ç»“

**ä½ çš„ç†è§£å®Œå…¨æ­£ç¡®ï¼**

1. âœ… åˆ›å»ºå¸‚åœº â†’ **ä¿å­˜åˆ°æ•°æ®åº“**
2. âœ… æ˜¾ç¤ºå¸‚åœº â†’ **ä»æ•°æ®åº“è¯»å–ï¼ˆé“¾ä¸‹ï¼‰**
3. âœ… æ¿€æ´»å¸‚åœº â†’ **ä¸Šé“¾ + æ›´æ–°æ•°æ®åº“**
4. âœ… äº¤æ˜“è®¢å• â†’ **æ•°æ®åº“åŒ¹é… + æ‰¹é‡é“¾ä¸Šç»“ç®—**

**æ•°æ®åº“æ˜¯æ ¸å¿ƒ**ï¼ŒåŒºå—é“¾åªåœ¨å¿…è¦æ—¶ä½¿ç”¨ï¼ˆæ¿€æ´»ã€ç»“ç®—ï¼‰ã€‚

è¿™å°±æ˜¯ Polymarket çš„æ ¸å¿ƒæ€æƒ³ï¼š**é“¾ä¸‹ + é“¾ä¸Šæ··åˆæ¶æ„**ï¼

---

**åˆ›å»ºæ—¶é—´**: 2025-10-24  
**è¯´æ˜**: å®Œæ•´æ•°æ®æµ


