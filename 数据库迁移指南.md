# ğŸ“¦ LUMI ç‹¬ç«‹æ•°æ®åº“ - è¿ç§»æŒ‡å—

## âœ… ä¸ºä»€ä¹ˆè¦ç‹¬ç«‹æ•°æ®åº“ï¼Ÿ

### ä¹‹å‰ï¼ˆä¾èµ–å¤–éƒ¨ï¼‰
```
LUMI/
  â””â”€â”€ server.js â†’ ä¾èµ– â†’ duolume-master/utils/database/app.db
                          â†‘
                    éœ€è¦å¤–éƒ¨é¡¹ç›®
```

**é—®é¢˜**ï¼š
- âŒ LUMIä¸èƒ½ç‹¬ç«‹è¿è¡Œ
- âŒ éƒ¨ç½²éœ€è¦ä¸¤ä¸ªé¡¹ç›®
- âŒ è·¯å¾„å¤æ‚æ˜“é”™
- âŒ æ•°æ®ç®¡ç†åˆ†æ•£

### ç°åœ¨ï¼ˆç‹¬ç«‹è‡ªåŒ…å«ï¼‰
```
LUMI/
  â”œâ”€â”€ database/
  â”‚   â””â”€â”€ alerts.db  â† ç‹¬ç«‹æ•°æ®åº“
  â””â”€â”€ server.js â†’ ç›´æ¥ä½¿ç”¨æœ¬åœ°æ•°æ®åº“
```

**ä¼˜åŠ¿**ï¼š
- âœ… LUMIå®Œå…¨ç‹¬ç«‹
- âœ… ä¸€ä¸ªé¡¹ç›®æå®š
- âœ… éƒ¨ç½²ç®€å•
- âœ… æ•°æ®é›†ä¸­ç®¡ç†

---

## ğŸš€ å¿«é€Ÿè¿ç§»ï¼ˆ3æ­¥ï¼‰

### æ­¥éª¤1ï¼šåˆå§‹åŒ–æ–°æ•°æ®åº“
```bash
cd LUMI/scripts
node setup-database.js
```

### æ­¥éª¤2ï¼šè¿ç§»æ—§æ•°æ®ï¼ˆå¯é€‰ï¼‰
```bash
node migrate-data.js
```

### æ­¥éª¤3ï¼šå¯¼å…¥å†å²äº‹ä»¶ï¼ˆå¯é€‰ï¼‰
```bash
node import-historical-crashes.js
```

### ä¸€é”®å®Œæˆï¼ˆWindowsï¼‰
```bash
cd LUMI\scripts
åˆå§‹åŒ–æ•°æ®åº“.bat
```

---

## ğŸ“‚ æ–°çš„ç›®å½•ç»“æ„

```
LUMI/
â”œâ”€â”€ database/               â† æ–°å¢ï¼šç‹¬ç«‹æ•°æ®åº“ç›®å½•
â”‚   â””â”€â”€ alerts.db          â† LUMIä¸“ç”¨æ•°æ®åº“
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ setup-database.js       â† åˆå§‹åŒ–æ•°æ®åº“
â”‚   â”œâ”€â”€ migrate-data.js         â† è¿ç§»æ—§æ•°æ®
â”‚   â”œâ”€â”€ import-historical-crashes.js  â† å¯¼å…¥å†å²äº‹ä»¶
â”‚   â””â”€â”€ åˆå§‹åŒ–æ•°æ®åº“.bat
â”œâ”€â”€ server.js              â† å·²æ›´æ–°ï¼šä½¿ç”¨æ–°æ•°æ®åº“è·¯å¾„
â””â”€â”€ ...
```

---

## ğŸ”§ è¯¦ç»†æ­¥éª¤

### 1. åˆå§‹åŒ–æ–°æ•°æ®åº“

åˆ›å»ºLUMIç‹¬ç«‹æ•°æ®åº“ï¼ŒåŒ…æ‹¬è¡¨ç»“æ„å’Œç´¢å¼•ï¼š

```bash
cd LUMI/scripts
node setup-database.js
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
âœ… Created database directory: LUMI/database
âœ… Database connection established
âœ… Table "alerts" created/verified
âœ… Created 4 indexes for better performance

ğŸ“Š Table structure:
   â€¢ id           : INTEGER
   â€¢ timestamp    : TEXT
   â€¢ symbol       : TEXT
   â€¢ message      : TEXT
   â€¢ severity     : TEXT
   â€¢ details      : TEXT
   â€¢ type         : TEXT
   â€¢ created_at   : DATETIME

ğŸ“ˆ Current records: 0

âœ… Database setup complete!
```

### 2. è¿ç§»ç°æœ‰æ•°æ®ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æœ‰æ—§æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œå¯ä»¥è¿ç§»è¿‡æ¥ï¼š

```bash
cd LUMI/scripts
node migrate-data.js
```

**åŠŸèƒ½**ï¼š
- ä» `duolume-master/utils/database/app.db` è¯»å–æ‰€æœ‰æ•°æ®
- å¤åˆ¶åˆ° `LUMI/database/alerts.db`
- ä¿ç•™æ‰€æœ‰è­¦æŠ¥è®°å½•
- æ—§æ•°æ®åº“ä¸ä¼šè¢«åˆ é™¤ï¼ˆä½œä¸ºå¤‡ä»½ï¼‰

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
ğŸ“ Source: duolume-master/utils/database/app.db
ğŸ“ Target: LUMI/database/alerts.db

âœ… Connected to source database
ğŸ“Š Found 156 records to migrate

ğŸ”„ Migrating data...

âœ… Migration complete!
   â€¢ Successfully migrated: 156 records
```

### 3. å¯¼å…¥å†å²é—ªå´©äº‹ä»¶ï¼ˆå¯é€‰ï¼‰

å¯¼å…¥21ä¸ªçœŸå®çš„å†å²é—ªå´©äº‹ä»¶ï¼š

```bash
cd LUMI/scripts
node import-historical-crashes.js
```

**åŒ…å«äº‹ä»¶**ï¼š
- 2020é»‘è‰²æ˜ŸæœŸå›› (-50.2%)
- 2022 FTXå´©ç›˜ (-23.5%)
- 2021ä¸­å›½ç¦ä»¤ (-30.2%)
- ç­‰ç­‰...

---

## âœ… éªŒè¯è¿ç§»

### æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶
```bash
# Windows
dir LUMI\database\alerts.db

# Linux/Mac
ls -lh LUMI/database/alerts.db
```

### æŸ¥è¯¢è®°å½•æ•°
```bash
cd LUMI
sqlite3 database/alerts.db "SELECT COUNT(*) FROM alerts;"
```

### æŸ¥çœ‹æœ€è¿‘çš„è­¦æŠ¥
```bash
sqlite3 database/alerts.db "SELECT datetime(timestamp, 'localtime'), symbol, severity FROM alerts ORDER BY timestamp DESC LIMIT 5;"
```

---

## ğŸ¯ é¢„è­¦ç³»ç»Ÿå¯¹æ¥

### é€‰é¡¹1ï¼šä¿æŒç°æœ‰é¢„è­¦ç³»ç»Ÿï¼ˆæ¨èï¼‰

é¢„è­¦ç³»ç»Ÿç»§ç»­å†™å…¥æ—§æ•°æ®åº“ï¼ŒLUMIå®šæœŸåŒæ­¥ï¼š

```javascript
// å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒæ­¥è„šæœ¬ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
// æ¯åˆ†é’Ÿä»æ—§æ•°æ®åº“åŒæ­¥æ–°è­¦æŠ¥åˆ°LUMIæ•°æ®åº“
```

### é€‰é¡¹2ï¼šä¿®æ”¹é¢„è­¦ç³»ç»Ÿå†™å…¥æ–°æ•°æ®åº“

ä¿®æ”¹ `duolume-master` çš„æ•°æ®åº“è·¯å¾„ï¼Œç›´æ¥å†™å…¥LUMIæ•°æ®åº“ï¼š

```python
# duolume-master/utils/db_manager.py
DB_PATH = '../LUMI/database/alerts.db'
```

### é€‰é¡¹3ï¼šä»…ç”¨å†å²æ•°æ® + æ‰‹åŠ¨å¯¼å…¥

- LUMIä½¿ç”¨ç‹¬ç«‹æ•°æ®åº“
- å®šæœŸè¿è¡Œå¯¼å…¥è„šæœ¬æ›´æ–°æ•°æ®
- é€‚åˆæ¼”ç¤ºå’Œæ•™å­¦åœºæ™¯

---

## ğŸ”„ æ›´æ–°åçš„é…ç½®

### server.jsï¼ˆå·²è‡ªåŠ¨æ›´æ–°ï¼‰
```javascript
// ä¹‹å‰
const dbFile = path.join(__dirname, '..', 'duolume-master', 'utils', 'database', 'app.db');

// ç°åœ¨
const dbFile = path.join(__dirname, 'database', 'alerts.db');
```

### import-historical-crashes.jsï¼ˆå·²è‡ªåŠ¨æ›´æ–°ï¼‰
```javascript
// ä¹‹å‰
const dbPath = path.join(__dirname, '../../duolume-master/utils/database/app.db');

// ç°åœ¨
const dbPath = path.join(__dirname, '..', 'database', 'alerts.db');
```

---

## ğŸ® å¯åŠ¨LUMI

### 1. ç¡®ä¿æ•°æ®åº“å·²åˆå§‹åŒ–
```bash
cd LUMI/scripts
node setup-database.js
```

### 2. å¯åŠ¨æœåŠ¡å™¨
```bash
cd LUMI
npm run dev
```

### 3. è®¿é—®åº”ç”¨
- http://localhost:3000/black-swan
- http://localhost:3000/black-swan-terminal

---

## ğŸ“Š æ•°æ®ç®¡ç†

### å¤‡ä»½æ•°æ®åº“
```bash
# Windows
copy LUMI\database\alerts.db LUMI\database\alerts.db.backup

# Linux/Mac
cp LUMI/database/alerts.db LUMI/database/alerts.db.backup
```

### æ¸…ç©ºæ•°æ®
```bash
cd LUMI
sqlite3 database/alerts.db "DELETE FROM alerts;"
```

### é‡æ–°å¯¼å…¥
```bash
cd LUMI/scripts
node import-historical-crashes.js
```

---

## ğŸš¢ éƒ¨ç½²ä¼˜åŠ¿

### ä¹‹å‰
```bash
# éœ€è¦éƒ¨ç½²ä¸¤ä¸ªé¡¹ç›®
deploy/
â”œâ”€â”€ duolume-master/  (éœ€è¦)
â”‚   â””â”€â”€ utils/database/app.db
â””â”€â”€ LUMI/            (ä¾èµ–ä¸Šé¢)
```

### ç°åœ¨
```bash
# åªéœ€éƒ¨ç½²LUMI
deploy/
â””â”€â”€ LUMI/            (å®Œå…¨ç‹¬ç«‹)
    â””â”€â”€ database/alerts.db
```

**éƒ¨ç½²æ›´ç®€å•**ï¼š
- âœ… å•ä¸€é¡¹ç›®
- âœ… æ— å¤–éƒ¨ä¾èµ–
- âœ… æ˜“äºå®¹å™¨åŒ–
- âœ… æ˜“äºç‰ˆæœ¬æ§åˆ¶

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### æ—§æ•°æ®åº“ä¸ä¼šè¢«åˆ é™¤
- è¿ç§»åï¼Œæ—§æ•°æ®åº“ä»ç„¶å­˜åœ¨
- å¯ä»¥ä½œä¸ºå¤‡ä»½ä¿ç•™
- å¦‚æœç¡®è®¤æ— è¯¯ï¼Œå¯ä»¥æ‰‹åŠ¨åˆ é™¤

### é¢„è­¦ç³»ç»Ÿé…ç½®
- å¦‚æœéœ€è¦å®æ—¶æ•°æ®ï¼Œéœ€è¦é…ç½®é¢„è­¦ç³»ç»Ÿ
- å¯ä»¥é€‰æ‹©è®©é¢„è­¦ç³»ç»Ÿå†™å…¥æ–°æ•°æ®åº“
- æˆ–è€…å®šæœŸåŒæ­¥æ•°æ®

---

## ğŸ‰ å®Œæˆï¼

ç°åœ¨LUMIæ‹¥æœ‰ï¼š
- âœ… ç‹¬ç«‹çš„æ•°æ®åº“
- âœ… å®Œæ•´çš„å†å²äº‹ä»¶
- âœ… ç‹¬ç«‹è¿è¡Œèƒ½åŠ›
- âœ… ç®€åŒ–çš„éƒ¨ç½²æµç¨‹

**LUMIç°åœ¨æ˜¯ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„åº”ç”¨ï¼** ğŸš€

---

## ğŸ“ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæ‰¾ä¸åˆ°æ—§æ•°æ®åº“
**è§£å†³**ï¼šè·³è¿‡è¿ç§»æ­¥éª¤ï¼Œç›´æ¥åˆå§‹åŒ–æ–°æ•°æ®åº“

### é—®é¢˜2ï¼šæ•°æ®æ²¡æœ‰æ˜¾ç¤º
**è§£å†³**ï¼š
1. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦æœ‰æ•°æ®ï¼š`sqlite3 database/alerts.db "SELECT COUNT(*) FROM alerts;"`
2. é‡å¯LUMIæœåŠ¡å™¨
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

### é—®é¢˜3ï¼šæƒé™é—®é¢˜
**è§£å†³**ï¼šç¡®ä¿LUMI/databaseç›®å½•æœ‰å†™æƒé™

---

**ç°åœ¨å°±å¼€å§‹è¿ç§»åˆ°ç‹¬ç«‹æ•°æ®åº“å§ï¼** ğŸ’ª









