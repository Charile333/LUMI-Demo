<!DOCTYPE html>
<html>
<head>
    <title>Debug Events API</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #000; color: #0f0; }
        .event { margin: 10px 0; padding: 10px; border: 1px solid #0f0; }
        .error { color: #f00; }
        .success { color: #0f0; }
    </style>
</head>
<body>
    <h1>测试历史事件 API</h1>
    <div id="result">加载中...</div>

    <script>
        fetch('/api/alerts/real-crash-events')
            .then(res => res.json())
            .then(data => {
                console.log('API 返回:', data);
                const div = document.getElementById('result');
                
                if (data.success && data.data) {
                    div.innerHTML = `<p class="success">✅ 成功! 共 ${data.data.length} 个事件</p>`;
                    div.innerHTML += '<ul>';
                    data.data.forEach((event, index) => {
                        div.innerHTML += `<li class="event">
                            #${index + 1}<br>
                            ID: ${event.id}<br>
                            Date: ${event.date}<br>
                            Asset: ${event.asset}<br>
                            Crash: ${event.crashPercentage}%<br>
                            Description: ${event.description}
                        </li>`;
                    });
                    div.innerHTML += '</ul>';
                } else {
                    div.innerHTML = '<p class="error">❌ 数据格式错误</p>';
                    div.innerHTML += '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
                }
            })
            .catch(err => {
                console.error('API 错误:', err);
                document.getElementById('result').innerHTML = `<p class="error">❌ 请求失败: ${err.message}</p>`;
            });
    </script>
</body>
</html>



